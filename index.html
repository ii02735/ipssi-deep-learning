<!DOCTYPE html><html><head><meta charset="utf-8"><title>Notes deep learning.md</title><style>@charset "UTF-8";@import 'https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css';code{color:#c7254e;background-color:#f9f2f4;border-radius:4px}code,kbd{padding:2px 4px}kbd{color:#fff;background-color:#333;border-radius:3px;box-shadow:inset 0 -1px 0 rgba(0,0,0,.25)}kbd kbd{padding:0;font-size:100%;box-shadow:none}pre{display:block;margin:0 0 10px;word-break:break-all;word-wrap:break-word;color:#333;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0}.pre-scrollable{max-height:340px;overflow-y:scroll}table{background-color:transparent}th{text-align:left}.table{width:100%;max-width:100%;margin-bottom:20px}.table>thead>tr>th{padding:8px;line-height:1.4285714;border-top:1px solid #ddd}.table>thead>tr>td,.table>tbody>tr>th,.table>tbody>tr>td,.table>tfoot>tr>th,.table>tfoot>tr>td{padding:8px;line-height:1.4285714;vertical-align:top;border-top:1px solid #ddd}.table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #ddd}.table>caption+thead>tr:first-child>th,.table>caption+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>td,.table>thead:first-child>tr:first-child>th,.table>thead:first-child>tr:first-child>td{border-top:0}.table>tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed>thead>tr>th,.table-condensed>thead>tr>td,.table-condensed>tbody>tr>th,.table-condensed>tbody>tr>td,.table-condensed>tfoot>tr>th,.table-condensed>tfoot>tr>td{padding:5px}.table-bordered,.table-bordered>thead>tr>th,.table-bordered>thead>tr>td,.table-bordered>tbody>tr>th,.table-bordered>tbody>tr>td,.table-bordered>tfoot>tr>th,.table-bordered>tfoot>tr>td{border:1px solid #ddd}.table-bordered>thead>tr>th,.table-bordered>thead>tr>td{border-bottom-width:2px}.table-striped>tbody>tr:nth-child(odd)>td,.table-striped>tbody>tr:nth-child(odd)>th{background-color:#f9f9f9}.table-hover>tbody>tr:hover>td,.table-hover>tbody>tr:hover>th{background-color:#f5f5f5}table col[class*="col-"]{position:static;float:none;display:table-column}table td[class*="col-"],table th[class*="col-"]{position:static;float:none;display:table-cell}.table>thead>tr>td.active,.table>thead>tr>th.active,.table>thead>tr.active>td,.table>thead>tr.active>th,.table>tbody>tr>td.active,.table>tbody>tr>th.active,.table>tbody>tr.active>td,.table>tbody>tr.active>th,.table>tfoot>tr>td.active,.table>tfoot>tr>th.active,.table>tfoot>tr.active>td,.table>tfoot>tr.active>th{background-color:#f5f5f5}.table-hover>tbody>tr>td.active:hover,.table-hover>tbody>tr>th.active:hover,.table-hover>tbody>tr.active:hover>td,.table-hover>tbody>tr:hover>.active,.table-hover>tbody>tr.active:hover>th{background-color:#e8e8e8}.table>thead>tr>td.success,.table>thead>tr>th.success,.table>thead>tr.success>td,.table>thead>tr.success>th,.table>tbody>tr>td.success,.table>tbody>tr>th.success,.table>tbody>tr.success>td,.table>tbody>tr.success>th,.table>tfoot>tr>td.success,.table>tfoot>tr>th.success,.table>tfoot>tr.success>td,.table>tfoot>tr.success>th{background-color:#dff0d8}.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover,.table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr:hover>.success,.table-hover>tbody>tr.success:hover>th{background-color:#d0e9c6}.table>thead>tr>td.info,.table>thead>tr>th.info,.table>thead>tr.info>td,.table>thead>tr.info>th,.table>tbody>tr>td.info,.table>tbody>tr>th.info,.table>tbody>tr.info>td,.table>tbody>tr.info>th,.table>tfoot>tr>td.info,.table>tfoot>tr>th.info,.table>tfoot>tr.info>td,.table>tfoot>tr.info>th{background-color:#d9edf7}.table-hover>tbody>tr>td.info:hover,.table-hover>tbody>tr>th.info:hover,.table-hover>tbody>tr.info:hover>td,.table-hover>tbody>tr:hover>.info,.table-hover>tbody>tr.info:hover>th{background-color:#c4e3f3}.table>thead>tr>td.warning,.table>thead>tr>th.warning,.table>thead>tr.warning>td,.table>thead>tr.warning>th,.table>tbody>tr>td.warning,.table>tbody>tr>th.warning,.table>tbody>tr.warning>td,.table>tbody>tr.warning>th,.table>tfoot>tr>td.warning,.table>tfoot>tr>th.warning,.table>tfoot>tr.warning>td,.table>tfoot>tr.warning>th{background-color:#fcf8e3}.table-hover>tbody>tr>td.warning:hover,.table-hover>tbody>tr>th.warning:hover,.table-hover>tbody>tr.warning:hover>td,.table-hover>tbody>tr:hover>.warning,.table-hover>tbody>tr.warning:hover>th{background-color:#faf2cc}.table>thead>tr>td.danger,.table>thead>tr>th.danger,.table>thead>tr.danger>td,.table>thead>tr.danger>th,.table>tbody>tr>td.danger,.table>tbody>tr>th.danger,.table>tbody>tr.danger>td,.table>tbody>tr.danger>th,.table>tfoot>tr>td.danger,.table>tfoot>tr>th.danger,.table>tfoot>tr.danger>td,.table>tfoot>tr.danger>th{background-color:#f2dede}.table-hover>tbody>tr>td.danger:hover,.table-hover>tbody>tr>th.danger:hover,.table-hover>tbody>tr.danger:hover>td,.table-hover>tbody>tr:hover>.danger,.table-hover>tbody>tr.danger:hover>th{background-color:#ebcccc}fieldset{border:0;min-width:0}legend{display:block;width:100%;margin-bottom:20px;font-size:21px;line-height:inherit;color:#333;border-bottom:1px solid #e5e5e5}label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700}input[type="radio"],input[type="checkbox"]{margin:4px 0 0;margin-top:1px \9;line-height:normal}input[type="file"]{display:block}input[type="range"]{display:block;width:100%}select[multiple],select[size]{height:auto}input[type="file"]:focus,input[type="radio"]:focus,input[type="checkbox"]:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}output{padding-top:7px}output,.form-control{display:block;font-size:14px;line-height:1.4285714;color:#555}.form-control{width:100%;height:34px;padding:6px 12px;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.form-control:focus{border-color:#66afe9;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.form-control::-moz-placeholder{color:#777;opacity:1}.form-control:-ms-input-placeholder{color:#777}.form-control::-webkit-input-placeholder{color:#777}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{cursor:not-allowed;background-color:#eee;opacity:1}textarea.form-control{height:auto}input[type="date"],input[type="time"],input[type="datetime-local"],input[type="month"]{line-height:34px;line-height:1.4285714 \0}input[type="date"].input-sm,.form-horizontal .form-group-sm input.form-control[type="date"],.input-group-sm>input.form-control[type="date"],.input-group-sm>input.input-group-addon[type="date"],.input-group-sm>.input-group-btn>input.btn[type="date"],input[type="time"].input-sm,.form-horizontal .form-group-sm input.form-control[type="time"],.input-group-sm>input.form-control[type="time"],.input-group-sm>input.input-group-addon[type="time"],.input-group-sm>.input-group-btn>input.btn[type="time"],input[type="datetime-local"].input-sm,.form-horizontal .form-group-sm input.form-control[type="datetime-local"],.input-group-sm>input.form-control[type="datetime-local"],.input-group-sm>input.input-group-addon[type="datetime-local"],.input-group-sm>.input-group-btn>input.btn[type="datetime-local"],input[type="month"].input-sm,.form-horizontal .form-group-sm input.form-control[type="month"],.input-group-sm>input.form-control[type="month"],.input-group-sm>input.input-group-addon[type="month"],.input-group-sm>.input-group-btn>input.btn[type="month"]{line-height:30px}input[type="date"].input-lg,.form-horizontal .form-group-lg input.form-control[type="date"],.input-group-lg>input.form-control[type="date"],.input-group-lg>input.input-group-addon[type="date"],.input-group-lg>.input-group-btn>input.btn[type="date"],input[type="time"].input-lg,.form-horizontal .form-group-lg input.form-control[type="time"],.input-group-lg>input.form-control[type="time"],.input-group-lg>input.input-group-addon[type="time"],.input-group-lg>.input-group-btn>input.btn[type="time"],input[type="datetime-local"].input-lg,.form-horizontal .form-group-lg input.form-control[type="datetime-local"],.input-group-lg>input.form-control[type="datetime-local"],.input-group-lg>input.input-group-addon[type="datetime-local"],.input-group-lg>.input-group-btn>input.btn[type="datetime-local"],input[type="month"].input-lg,.form-horizontal .form-group-lg input.form-control[type="month"],.input-group-lg>input.form-control[type="month"],.input-group-lg>input.input-group-addon[type="month"],.input-group-lg>.input-group-btn>input.btn[type="month"]{line-height:46px}.form-group{margin-bottom:15px}.radio,.checkbox{position:relative;display:block;min-height:20px;margin-top:10px;margin-bottom:10px}.radio label,.checkbox label{padding-left:20px;margin-bottom:0;font-weight:400;cursor:pointer}.radio input[type="radio"],.radio-inline input[type="radio"],.checkbox input[type="checkbox"],.checkbox-inline input[type="checkbox"]{position:absolute;margin-left:-20px;margin-top:4px \9}.radio+.radio,.checkbox+.checkbox{margin-top:-5px}.radio-inline,.checkbox-inline{display:inline-block;padding-left:20px;margin-bottom:0;vertical-align:middle;font-weight:400;cursor:pointer}.radio-inline+.radio-inline,.checkbox-inline+.checkbox-inline{margin-top:0;margin-left:10px}input[type="radio"][disabled],input[type="radio"].disabled,fieldset[disabled] input[type="radio"],input[type="checkbox"][disabled],input[type="checkbox"].disabled,fieldset[disabled] input[type="checkbox"],.radio-inline.disabled,fieldset[disabled] .radio-inline,.checkbox-inline.disabled,fieldset[disabled] .checkbox-inline,.radio.disabled label,fieldset[disabled] .radio label,.checkbox.disabled label,fieldset[disabled] .checkbox label{cursor:not-allowed}.form-control-static{padding-top:7px;padding-bottom:7px;margin-bottom:0}.form-control-static.input-lg,.form-horizontal .form-group-lg .form-control-static.form-control,.input-group-lg>.form-control-static.form-control,.input-group-lg>.form-control-static.input-group-addon,.input-group-lg>.input-group-btn>.form-control-static.btn,.form-control-static.input-sm,.form-horizontal .form-group-sm .form-control-static.form-control,.input-group-sm>.form-control-static.form-control,.input-group-sm>.form-control-static.input-group-addon,.input-group-sm>.input-group-btn>.form-control-static.btn{padding-left:0;padding-right:0}.input-sm,.form-horizontal .form-group-sm .form-control,.input-group-sm>.form-control{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.input-group-sm>.input-group-addon{height:30px;line-height:1.5}.input-group-sm>.input-group-btn>.btn{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}select.input-sm,.form-horizontal .form-group-sm select.form-control,.input-group-sm>select.form-control,.input-group-sm>select.input-group-addon,.input-group-sm>.input-group-btn>select.btn{height:30px;line-height:30px}textarea.input-sm,.form-horizontal .form-group-sm textarea.form-control,.input-group-sm>textarea.form-control,.input-group-sm>textarea.input-group-addon,.input-group-sm>.input-group-btn>textarea.btn,select[multiple].input-sm,.form-horizontal .form-group-sm select.form-control[multiple],.input-group-sm>select.form-control[multiple],.input-group-sm>select.input-group-addon[multiple],.input-group-sm>.input-group-btn>select.btn[multiple]{height:auto}.input-lg,.form-horizontal .form-group-lg .form-control,.input-group-lg>.form-control{height:46px;padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}.input-group-lg>.input-group-addon{height:46px;line-height:1.33}.input-group-lg>.input-group-btn>.btn{height:46px;padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}select.input-lg,.form-horizontal .form-group-lg select.form-control,.input-group-lg>select.form-control,.input-group-lg>select.input-group-addon,.input-group-lg>.input-group-btn>select.btn{height:46px;line-height:46px}textarea.input-lg,.form-horizontal .form-group-lg textarea.form-control,.input-group-lg>textarea.form-control,.input-group-lg>textarea.input-group-addon,.input-group-lg>.input-group-btn>textarea.btn,select[multiple].input-lg,.form-horizontal .form-group-lg select.form-control[multiple],.input-group-lg>select.form-control[multiple],.input-group-lg>select.input-group-addon[multiple],.input-group-lg>.input-group-btn>select.btn[multiple]{height:auto}.has-feedback{position:relative}.has-feedback .form-control{padding-right:42.5px}.form-control-feedback{position:absolute;top:25px;right:0;z-index:2;display:block;width:34px;height:34px;line-height:34px;text-align:center}.input-lg+.form-control-feedback,.form-horizontal .form-group-lg .form-control+.form-control-feedback,.input-group-lg>.form-control+.form-control-feedback,.input-group-lg>.input-group-addon+.form-control-feedback,.input-group-lg>.input-group-btn>.btn+.form-control-feedback{width:46px;height:46px;line-height:46px}.input-sm+.form-control-feedback,.form-horizontal .form-group-sm .form-control+.form-control-feedback,.input-group-sm>.form-control+.form-control-feedback,.input-group-sm>.input-group-addon+.form-control-feedback,.input-group-sm>.input-group-btn>.btn+.form-control-feedback{width:30px;height:30px;line-height:30px}.has-success .help-block,.has-success .control-label,.has-success .radio,.has-success .checkbox,.has-success .radio-inline,.has-success .checkbox-inline{color:#3c763d}.has-success .form-control{border-color:#3c763d;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-success .form-control:focus{border-color:#2b542c;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #67b168}.has-success .input-group-addon{color:#3c763d;border-color:#3c763d;background-color:#dff0d8}.has-success .form-control-feedback{color:#3c763d}.has-warning .help-block,.has-warning .control-label,.has-warning .radio,.has-warning .checkbox,.has-warning .radio-inline,.has-warning .checkbox-inline{color:#8a6d3b}.has-warning .form-control{border-color:#8a6d3b;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-warning .form-control:focus{border-color:#66512c;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #c0a16b}.has-warning .input-group-addon{color:#8a6d3b;border-color:#8a6d3b;background-color:#fcf8e3}.has-warning .form-control-feedback{color:#8a6d3b}.has-error .help-block,.has-error .control-label,.has-error .radio,.has-error .checkbox,.has-error .radio-inline,.has-error .checkbox-inline{color:#a94442}.has-error .form-control{border-color:#a94442;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-error .form-control:focus{border-color:#843534;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483}.has-error .input-group-addon{color:#a94442;border-color:#a94442;background-color:#f2dede}.has-error .form-control-feedback{color:#a94442}.has-feedback label.sr-only~.form-control-feedback{top:0}.help-block{display:block;margin-top:5px;margin-bottom:10px;color:#737373}.form-horizontal .radio,.form-horizontal .checkbox,.form-horizontal .radio-inline,.form-horizontal .checkbox-inline{margin-top:0;margin-bottom:0;padding-top:7px}.form-horizontal .radio,.form-horizontal .checkbox{min-height:27px}.form-horizontal .form-group{margin-left:-15px;margin-right:-15px}.form-horizontal .form-group:before{content:" ";display:table}.form-horizontal .form-group:after{content:" ";display:table;clear:both}.form-horizontal .has-feedback .form-control-feedback{top:0;right:15px}.btn{display:inline-block;vertical-align:middle;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.btn:focus,.btn:active:focus,.btn.active:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn:hover,.btn:focus{color:#333;text-decoration:none}.btn:active,.btn.active{outline:0;background-image:none;box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{cursor:not-allowed;pointer-events:none;opacity:.65;filter:alpha(opacity=65);box-shadow:none}.btn-default{color:#333;background-color:#fff;border-color:#ccc}.btn-default:hover,.btn-default:focus,.btn-default:active,.btn-default.active,.open>.btn-default.dropdown-toggle{color:#333;background-color:#e6e6e6;border-color:#adadad}.btn-default:active,.btn-default.active,.open>.btn-default.dropdown-toggle{background-image:none}.btn-default.disabled,.btn-default.disabled:hover,.btn-default.disabled:focus,.btn-default.disabled:active,.btn-default.disabled.active,.btn-default[disabled],.btn-default[disabled]:hover,.btn-default[disabled]:focus,.btn-default[disabled]:active,.btn-default[disabled].active,fieldset[disabled] .btn-default,fieldset[disabled] .btn-default:hover,fieldset[disabled] .btn-default:focus,fieldset[disabled] .btn-default:active,fieldset[disabled] .btn-default.active{background-color:#fff;border-color:#ccc}.btn-default .badge{color:#fff;background-color:#333}.btn-primary{color:#fff;background-color:#428bca;border-color:#357ebd}.btn-primary:hover,.btn-primary:focus,.btn-primary:active,.btn-primary.active,.open>.btn-primary.dropdown-toggle{color:#fff;background-color:#3071a9;border-color:#285e8e}.btn-primary:active,.btn-primary.active,.open>.btn-primary.dropdown-toggle{background-image:none}.btn-primary.disabled,.btn-primary.disabled:hover,.btn-primary.disabled:focus,.btn-primary.disabled:active,.btn-primary.disabled.active,.btn-primary[disabled],.btn-primary[disabled]:hover,.btn-primary[disabled]:focus,.btn-primary[disabled]:active,.btn-primary[disabled].active,fieldset[disabled] .btn-primary,fieldset[disabled] .btn-primary:hover,fieldset[disabled] .btn-primary:focus,fieldset[disabled] .btn-primary:active,fieldset[disabled] .btn-primary.active{background-color:#428bca;border-color:#357ebd}.btn-primary .badge{color:#428bca;background-color:#fff}.btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c}.btn-success:hover,.btn-success:focus,.btn-success:active,.btn-success.active,.open>.btn-success.dropdown-toggle{color:#fff;background-color:#449d44;border-color:#398439}.btn-success:active,.btn-success.active,.open>.btn-success.dropdown-toggle{background-image:none}.btn-success.disabled,.btn-success.disabled:hover,.btn-success.disabled:focus,.btn-success.disabled:active,.btn-success.disabled.active,.btn-success[disabled],.btn-success[disabled]:hover,.btn-success[disabled]:focus,.btn-success[disabled]:active,.btn-success[disabled].active,fieldset[disabled] .btn-success,fieldset[disabled] .btn-success:hover,fieldset[disabled] .btn-success:focus,fieldset[disabled] .btn-success:active,fieldset[disabled] .btn-success.active{background-color:#5cb85c;border-color:#4cae4c}.btn-success .badge{color:#5cb85c;background-color:#fff}.btn-info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.btn-info:hover,.btn-info:focus,.btn-info:active,.btn-info.active,.open>.btn-info.dropdown-toggle{color:#fff;background-color:#31b0d5;border-color:#269abc}.btn-info:active,.btn-info.active,.open>.btn-info.dropdown-toggle{background-image:none}.btn-info.disabled,.btn-info.disabled:hover,.btn-info.disabled:focus,.btn-info.disabled:active,.btn-info.disabled.active,.btn-info[disabled],.btn-info[disabled]:hover,.btn-info[disabled]:focus,.btn-info[disabled]:active,.btn-info[disabled].active,fieldset[disabled] .btn-info,fieldset[disabled] .btn-info:hover,fieldset[disabled] .btn-info:focus,fieldset[disabled] .btn-info:active,fieldset[disabled] .btn-info.active{background-color:#5bc0de;border-color:#46b8da}.btn-info .badge{color:#5bc0de;background-color:#fff}.btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236}.btn-warning:hover,.btn-warning:focus,.btn-warning:active,.btn-warning.active,.open>.btn-warning.dropdown-toggle{color:#fff;background-color:#ec971f;border-color:#d58512}.btn-warning:active,.btn-warning.active,.open>.btn-warning.dropdown-toggle{background-image:none}.btn-warning.disabled,.btn-warning.disabled:hover,.btn-warning.disabled:focus,.btn-warning.disabled:active,.btn-warning.disabled.active,.btn-warning[disabled],.btn-warning[disabled]:hover,.btn-warning[disabled]:focus,.btn-warning[disabled]:active,.btn-warning[disabled].active,fieldset[disabled] .btn-warning,fieldset[disabled] .btn-warning:hover,fieldset[disabled] .btn-warning:focus,fieldset[disabled] .btn-warning:active,fieldset[disabled] .btn-warning.active{background-color:#f0ad4e;border-color:#eea236}.btn-warning .badge{color:#f0ad4e;background-color:#fff}.btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.btn-danger:hover,.btn-danger:focus,.btn-danger:active,.btn-danger.active,.open>.btn-danger.dropdown-toggle{color:#fff;background-color:#c9302c;border-color:#ac2925}.btn-danger:active,.btn-danger.active,.open>.btn-danger.dropdown-toggle{background-image:none}.btn-danger.disabled,.btn-danger.disabled:hover,.btn-danger.disabled:focus,.btn-danger.disabled:active,.btn-danger.disabled.active,.btn-danger[disabled],.btn-danger[disabled]:hover,.btn-danger[disabled]:focus,.btn-danger[disabled]:active,.btn-danger[disabled].active,fieldset[disabled] .btn-danger,fieldset[disabled] .btn-danger:hover,fieldset[disabled] .btn-danger:focus,fieldset[disabled] .btn-danger:active,fieldset[disabled] .btn-danger.active{background-color:#d9534f;border-color:#d43f3a}.btn-danger .badge{color:#d9534f;background-color:#fff}.btn-link{color:#428bca;font-weight:400;cursor:pointer;border-radius:0}.btn-link,.btn-link:active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;box-shadow:none}.btn-link,.btn-link:hover,.btn-link:focus,.btn-link:active{border-color:transparent}.btn-link:hover,.btn-link:focus{color:#2a6496;text-decoration:underline;background-color:transparent}.btn-link[disabled]:hover,.btn-link[disabled]:focus,fieldset[disabled] .btn-link:hover,fieldset[disabled] .btn-link:focus{color:#777;text-decoration:none}.btn-lg{padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}.btn-sm{padding:5px 10px}.btn-sm,.btn-xs{font-size:12px;line-height:1.5;border-radius:3px}.btn-xs{padding:1px 5px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:5px}input[type="submit"].btn-block,input[type="reset"].btn-block,input[type="button"].btn-block{width:100%}.fade{opacity:0;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{display:none}.collapse.in{display:block}tr.collapse.in{display:table-row}tbody.collapse.in{display:table-row-group}.collapsing{position:relative;height:0;overflow:hidden;transition:height .35s ease}.input-group{position:relative;display:table;border-collapse:separate}.input-group[class*="col-"]{float:none;padding-left:0;padding-right:0}.input-group .form-control{position:relative;z-index:2;float:left;width:100%;margin-bottom:0}.input-group-addon,.input-group-btn,.input-group .form-control{display:table-cell}.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child),.input-group .form-control:not(:first-child):not(:last-child){border-radius:0}.input-group-addon{white-space:nowrap}.input-group-addon,.input-group-btn{width:1%;vertical-align:middle}.input-group-addon{padding:6px 12px;font-size:14px;font-weight:400;line-height:1;color:#555;text-align:center;background-color:#eee;border:1px solid #ccc;border-radius:4px}.input-group-addon.input-sm,.form-horizontal .form-group-sm .input-group-addon.form-control,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.input-group-addon.btn{padding:5px 10px;font-size:12px;border-radius:3px}.input-group-addon.input-lg,.form-horizontal .form-group-lg .input-group-addon.form-control,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.input-group-addon.btn{padding:10px 16px;font-size:18px;border-radius:6px}.input-group-addon input[type="radio"],.input-group-addon input[type="checkbox"]{margin-top:0}.input-group .form-control:first-child,.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle),.input-group-btn:last-child>.btn-group:not(:last-child)>.btn{border-bottom-right-radius:0;border-top-right-radius:0}.input-group-addon:first-child{border-right:0}.input-group .form-control:last-child,.input-group-addon:last-child,.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group>.btn,.input-group-btn:last-child>.dropdown-toggle,.input-group-btn:first-child>.btn:not(:first-child),.input-group-btn:first-child>.btn-group:not(:first-child)>.btn{border-bottom-left-radius:0;border-top-left-radius:0}.input-group-addon:last-child{border-left:0}.input-group-btn{font-size:0;white-space:nowrap}.input-group-btn,.input-group-btn>.btn{position:relative}.input-group-btn>.btn+.btn{margin-left:-1px}.input-group-btn>.btn:hover,.input-group-btn>.btn:focus,.input-group-btn>.btn:active{z-index:2}.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group{margin-right:-1px}.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group{margin-left:-1px}.pagination{display:inline-block;padding-left:0;margin:20px 0;border-radius:4px}.pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;line-height:1.4285714;text-decoration:none;color:#428bca;background-color:#fff;border:1px solid #ddd;margin-left:-1px}.pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;border-bottom-left-radius:4px;border-top-left-radius:4px}.pagination>li:last-child>a,.pagination>li:last-child>span{border-bottom-right-radius:4px;border-top-right-radius:4px}.pagination>li>a:hover,.pagination>li>a:focus,.pagination>li>span:hover,.pagination>li>span:focus{color:#2a6496;background-color:#eee;border-color:#ddd}.pagination>.active>a,.pagination>.active>a:hover,.pagination>.active>a:focus,.pagination>.active>span,.pagination>.active>span:hover,.pagination>.active>span:focus{z-index:2;color:#fff;background-color:#428bca;border-color:#428bca;cursor:default}.pagination>.disabled>span,.pagination>.disabled>span:hover,.pagination>.disabled>span:focus,.pagination>.disabled>a,.pagination>.disabled>a:hover,.pagination>.disabled>a:focus{color:#777;background-color:#fff;border-color:#ddd;cursor:not-allowed}.pagination-lg>li>a,.pagination-lg>li>span{padding:10px 16px;font-size:18px}.pagination-lg>li:first-child>a,.pagination-lg>li:first-child>span{border-bottom-left-radius:6px;border-top-left-radius:6px}.pagination-lg>li:last-child>a,.pagination-lg>li:last-child>span{border-bottom-right-radius:6px;border-top-right-radius:6px}.pagination-sm>li>a,.pagination-sm>li>span{padding:5px 10px;font-size:12px}.pagination-sm>li:first-child>a,.pagination-sm>li:first-child>span{border-bottom-left-radius:3px;border-top-left-radius:3px}.pagination-sm>li:last-child>a,.pagination-sm>li:last-child>span{border-bottom-right-radius:3px;border-top-right-radius:3px}.close{float:right;font-size:21px;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer;opacity:.5;filter:alpha(opacity=50)}button.close{padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.modal-open,.modal{overflow:hidden}.modal{display:none;position:fixed;top:0;right:0;bottom:0;left:0;z-index:1050;-webkit-overflow-scrolling:touch;outline:0}.modal.fade .modal-dialog{transform:translate3d(0,-25%,0);transition:transform .3s ease-out}.modal.in .modal-dialog{transform:translate3d(0,0,0)}.modal-open .modal{overflow-x:hidden;overflow-y:auto}.modal-dialog{position:relative;width:auto;margin:10px}.modal-content{position:relative;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,.2);border-radius:6px;box-shadow:0 3px 9px rgba(0,0,0,.5);background-clip:padding-box;outline:0}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.modal-backdrop.fade{opacity:0;filter:alpha(opacity=0)}.modal-backdrop.in{opacity:.5;filter:alpha(opacity=50)}.modal-header{padding:15px;border-bottom:1px solid #e5e5e5;min-height:16.4285714px}.modal-header .close{margin-top:-2px}.modal-title{margin:0;line-height:1.4285714}.modal-body{position:relative;padding:15px}.modal-footer{padding:15px;text-align:right;border-top:1px solid #e5e5e5}.modal-footer:before,.modal-footer:after{content:" ";display:table}.modal-footer:after{clear:both}.modal-footer .btn+.btn{margin-left:5px;margin-bottom:0}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}.modal-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.clearfix:before,.clearfix:after{content:" ";display:table}.clearfix:after{clear:both}.center-block{display:block;margin-left:auto;margin-right:auto}.pull-right{float:right!important}.pull-left{float:left!important}.hide{display:none!important}.show{display:block!important}.invisible{visibility:hidden}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.hidden{display:none!important;visibility:hidden!important}.affix{position:fixed;transform:translate3d(0,0,0)}.hljs{display:block;overflow-x:auto;padding:.5em;background:#002b36;color:#839496;-webkit-text-size-adjust:none}.hljs-comment,.hljs-template_comment,.diff .hljs-header,.hljs-doctype,.hljs-pi,.lisp .hljs-string,.hljs-javadoc{color:#586e75}.hljs-keyword,.hljs-winutils,.method,.hljs-addition,.css .hljs-tag,.hljs-request,.hljs-status,.nginx .hljs-title{color:#859900}.hljs-number,.hljs-command,.hljs-string,.hljs-tag .hljs-value,.hljs-rules .hljs-value,.hljs-phpdoc,.hljs-dartdoc,.tex .hljs-formula,.hljs-regexp,.hljs-hexcolor,.hljs-link_url{color:#2aa198}.hljs-title,.hljs-localvars,.hljs-chunk,.hljs-decorator,.hljs-built_in,.hljs-identifier,.vhdl .hljs-literal,.hljs-id,.css .hljs-function{color:#268bd2}.hljs-attribute,.hljs-variable,.lisp .hljs-body,.smalltalk .hljs-number,.hljs-constant,.hljs-class .hljs-title,.hljs-parent,.hljs-type,.hljs-link_reference{color:#b58900}.hljs-preprocessor,.hljs-preprocessor .hljs-keyword,.hljs-pragma,.hljs-shebang,.hljs-symbol,.hljs-symbol .hljs-string,.diff .hljs-change,.hljs-special,.hljs-attr_selector,.hljs-subst,.hljs-cdata,.css .hljs-pseudo,.hljs-header{color:#cb4b16}.hljs-deletion,.hljs-important{color:#dc322f}.hljs-link_label{color:#6c71c4}.tex .hljs-formula{background:#073642}*,*:before,*:after{box-sizing:border-box}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background:0 0}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}images{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd{font-size:1em}code,kbd,pre,samp{font-family:monospace,monospace}samp{font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0;margin-right:5px}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}.debug{background-color:#ffc0cb!important}.ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ir{background-color:transparent;border:0;overflow:hidden}.ir::before{content:'';display:block;height:150%;width:0}html{font-size:.875em;background:#fff;color:#373D49}html,body{font-family:Georgia,Cambria,serif;height:100%}body{font-size:1rem;font-weight:400;line-height:2rem}ul,ol{margin-bottom:.83999rem;padding-top:.16001rem}li{font-feature-settings:'kern' 1,'onum' 1,'liga' 1;margin-left:1rem}li>ul,li>ol{margin-bottom:0}p{padding-top:.66001rem;font-feature-settings:'kern' 1,'onum' 1,'liga' 1;margin-top:0}p,pre{margin-bottom:1.33999rem}pre{font-size:1rem;padding:.66001rem 9.5px 9.5px;line-height:2rem;background:linear-gradient(to bottom,#fff 0,#fff .75rem,#f5f7fa .75rem,#f5f7fa 2.75rem,#fff 2.75rem,#fff 4rem);background-size:100% 4rem;border-color:#D3DAEA}blockquote{margin:0}blockquote p{font-size:1rem;margin-bottom:.33999rem;font-style:italic;padding:.66001rem 1rem 1rem;border-left:3px solid #A0AABF}th,td{padding:12px}h1,h2,h3,h4,h5,h6{font-family:"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif;font-feature-settings:'dlig' 1,'liga' 1,'lnum' 1,'kern' 1;font-style:normal;font-weight:600;margin-top:0}h1{line-height:3rem;font-size:2.0571429rem;margin-bottom:.21999rem;padding-top:.78001rem}h2{font-size:1.953125rem;margin-bottom:.1835837rem;padding-top:.8164163rem}h2,h3{line-height:3rem}h3{font-size:1.6457143rem;margin-bottom:.07599rem;padding-top:.92401rem}h4{font-size:1.5625rem;margin-bottom:.546865rem;padding-top:.453135rem}h5{font-size:1.25rem;margin-bottom:-.56251rem;padding-top:.56251rem}h6{font-size:1rem;margin-bottom:-.65001rem;padding-top:.65001rem}a{cursor:pointer;color:#35D7BB;text-decoration:none}a:hover,a:focus{border-bottom-color:#35D7BB;color:#dff9f4}img{height:auto;max-width:100%}dt{font-style:italic;font-weight:600}.g{display:block}.g:after{clear:both;content:'';display:table}.g-b{float:left;margin:0;width:100%}.g{margin-left:-16px;margin-right:-16px}.g-b{padding-left:16px;padding-right:16px}.g-b--center{display:block;float:none;margin:0 auto}.g-b--right{float:right}.g-b--1of1{width:100%}.g-b--1of2,.g-b--2of4,.g-b--3of6,.g-b--4of8,.g-b--5of10,.g-b--6of12{width:50%}.g-b--1of3,.g-b--2of6,.g-b--4of12{width:33.333%}.g-b--2of3,.g-b--4of6,.g-b--8of12{width:66.666%}.g-b--1of4,.g-b--2of8,.g-b--3of12{width:25%}.g-b--3of4,.g-b--6of8,.g-b--9of12{width:75%}.g-b--1of5,.g-b--2of10{width:20%}.g-b--2of5,.g-b--4of10{width:40%}.g-b--3of5,.g-b--6of10{width:60%}.g-b--4of5,.g-b--8of10{width:80%}.g-b--1of6,.g-b--2of12{width:16.666%}.g-b--5of6,.g-b--10of12{width:83.333%}.g-b--1of8{width:12.5%}.g-b--3of8{width:37.5%}.g-b--5of8{width:62.5%}.g-b--7of8{width:87.5%}.g-b--1of10{width:10%}.g-b--3of10{width:30%}.g-b--7of10{width:70%}.g-b--9of10{width:90%}.g-b--1of12{width:8.333%}.g-b--5of12{width:41.666%}.g-b--7of12{width:58.333%}.g-b--11of12{width:91.666%}.g-b--push--1of1{margin-left:100%}.g-b--push--1of2,.g-b--push--2of4,.g-b--push--3of6,.g-b--push--4of8,.g-b--push--5of10,.g-b--push--6of12{margin-left:50%}.g-b--push--1of3,.g-b--push--2of6,.g-b--push--4of12{margin-left:33.333%}.g-b--push--2of3,.g-b--push--4of6,.g-b--push--8of12{margin-left:66.666%}.g-b--push--1of4,.g-b--push--2of8,.g-b--push--3of12{margin-left:25%}.g-b--push--3of4,.g-b--push--6of8,.g-b--push--9of12{margin-left:75%}.g-b--push--1of5,.g-b--push--2of10{margin-left:20%}.g-b--push--2of5,.g-b--push--4of10{margin-left:40%}.g-b--push--3of5,.g-b--push--6of10{margin-left:60%}.g-b--push--4of5,.g-b--push--8of10{margin-left:80%}.g-b--push--1of6,.g-b--push--2of12{margin-left:16.666%}.g-b--push--5of6,.g-b--push--10of12{margin-left:83.333%}.g-b--push--1of8{margin-left:12.5%}.g-b--push--3of8{margin-left:37.5%}.g-b--push--5of8{margin-left:62.5%}.g-b--push--7of8{margin-left:87.5%}.g-b--push--1of10{margin-left:10%}.g-b--push--3of10{margin-left:30%}.g-b--push--7of10{margin-left:70%}.g-b--push--9of10{margin-left:90%}.g-b--push--1of12{margin-left:8.333%}.g-b--push--5of12{margin-left:41.666%}.g-b--push--7of12{margin-left:58.333%}.g-b--push--11of12{margin-left:91.666%}.g-b--pull--1of1{margin-right:100%}.g-b--pull--1of2,.g-b--pull--2of4,.g-b--pull--3of6,.g-b--pull--4of8,.g-b--pull--5of10,.g-b--pull--6of12{margin-right:50%}.g-b--pull--1of3,.g-b--pull--2of6,.g-b--pull--4of12{margin-right:33.333%}.g-b--pull--2of3,.g-b--pull--4of6,.g-b--pull--8of12{margin-right:66.666%}.g-b--pull--1of4,.g-b--pull--2of8,.g-b--pull--3of12{margin-right:25%}.g-b--pull--3of4,.g-b--pull--6of8,.g-b--pull--9of12{margin-right:75%}.g-b--pull--1of5,.g-b--pull--2of10{margin-right:20%}.g-b--pull--2of5,.g-b--pull--4of10{margin-right:40%}.g-b--pull--3of5,.g-b--pull--6of10{margin-right:60%}.g-b--pull--4of5,.g-b--pull--8of10{margin-right:80%}.g-b--pull--1of6,.g-b--pull--2of12{margin-right:16.666%}.g-b--pull--5of6,.g-b--pull--10of12{margin-right:83.333%}.g-b--pull--1of8{margin-right:12.5%}.g-b--pull--3of8{margin-right:37.5%}.g-b--pull--5of8{margin-right:62.5%}.g-b--pull--7of8{margin-right:87.5%}.g-b--pull--1of10{margin-right:10%}.g-b--pull--3of10{margin-right:30%}.g-b--pull--7of10{margin-right:70%}.g-b--pull--9of10{margin-right:90%}.g-b--pull--1of12{margin-right:8.333%}.g-b--pull--5of12{margin-right:41.666%}.g-b--pull--7of12{margin-right:58.333%}.g-b--pull--11of12{margin-right:91.666%}.splashscreen{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#373D49;z-index:22}.splashscreen-dillinger{width:260px;height:auto;display:block;margin:0 auto;padding-bottom:3rem}.splashscreen p{font-size:1.25rem;padding-top:.56251rem;font-family:"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;text-align:center;max-width:500px;margin:0 auto;color:#FFF}.sp-center{position:relative;transform:translateY(-50%);top:50%}.open-menu>.wrapper{overflow-x:hidden}.page{margin:0 auto;position:relative;top:0;left:0;width:100%;height:100%;z-index:2;transition:all .25s ease-in-out;background-color:#fff;padding-top:51px;will-change:left}.open-menu .page{left:270px}.title{line-height:1rem;font-size:.8rem;margin-bottom:.77999rem;padding-top:.22001rem;font-weight:500;color:#A0AABF;letter-spacing:1px;text-transform:uppercase;padding-left:16px;padding-right:16px;margin-top:1rem}.split-preview .title{padding-left:0}.title-document{line-height:1rem;font-size:1.25rem;margin-bottom:.89999rem;padding-top:.10001rem;font-weight:400;font-family:"Ubuntu Mono",Monaco;color:#373D49;padding-left:16px;padding-right:16px;width:80%;min-width:300px;outline:0;border:none}.icon{display:block;margin:0 auto;width:36px;height:36px;border-radius:3px;text-align:center}.icon svg{display:inline-block;margin-left:auto;margin-right:auto}.icon-preview{background-color:#373D49;line-height:40px}.icon-preview svg{width:19px;height:12px}.icon-settings{background-color:#373D49;line-height:44px}.icon-settings svg{width:18px;height:18px}.icon-link{width:16px;height:16px;line-height:1;margin-right:24px;text-align:right}.navbar{background-color:#373D49;height:51px;width:100%;position:fixed;top:0;left:0;z-index:6;transition:all .25s ease-in-out;will-change:left}.navbar:after{content:"";display:table;clear:both}.open-menu .navbar{left:270px}.navbar-brand{float:left;margin:0 0 0 24px;padding:0;line-height:42px}.navbar-brand svg{width:85px;height:11px}.nav-left{float:left}.nav-right{float:right}.nav-sidebar{width:100%}.menu{list-style:none;margin:0;padding:0}.menu a{border:0;color:#A0AABF;font-family:"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif;outline:none;text-transform:uppercase}.menu a:hover{color:#35D7BB}.menu .menu-item{border:0;display:none;float:left;margin:0;position:relative}.menu .menu-item>a{display:block;font-size:12px;height:51px;letter-spacing:1px;line-height:51px;padding:0 24px}.menu .menu-item--settings,.menu .menu-item--preview,.menu .menu-item--save-to.in-sidebar,.menu .menu-item--import-from.in-sidebar,.menu .menu-item--link-unlink.in-sidebar,.menu .menu-item--documents.in-sidebar{display:block}.menu .menu-item--documents{padding-bottom:1rem}.menu .menu-item.open>a{background-color:#1D212A}.menu .menu-item-icon>a{height:auto;padding:0}.menu .menu-item-icon:hover>a{background-color:transparent}.menu .menu-link.open i{background-color:#1D212A}.menu .menu-link.open g{fill:#35D7BB}.menu .menu-link-preview,.menu .menu-link-settings{margin-top:8px;width:51px}.menu-sidebar{width:100%}.menu-sidebar .menu-item{float:none;margin-bottom:1px;width:100%}.menu-sidebar .menu-item.open>a{background-color:#373D49}.menu-sidebar .open .caret{transform:rotate(180deg)}.menu-sidebar>.menu-item:hover .dropdown a,.menu-sidebar>.menu-item:hover .settings a{background-color:transparent}.menu-sidebar .menu-link{background-color:#373D49;font-weight:600}.menu-sidebar .menu-link:after{content:"";display:table;clear:both}.menu-sidebar .menu-link>span{float:left}.menu-sidebar .menu-link>.caret{float:right;text-align:right;top:22px}.menu-sidebar .dropdown,.menu-sidebar .settings{background-color:transparent;position:static;width:100%}.dropdown{position:absolute;right:0;top:51px;width:188px}.dropdown,.settings{display:none;background-color:#1D212A}.dropdown{padding:0}.dropdown,.settings,.sidebar-list{list-style:none;margin:0}.sidebar-list{padding:0}.dropdown li{margin:32px 0;padding:0 0 0 32px}.dropdown li,.settings li{line-height:1}.sidebar-list li{line-height:1;margin:32px 0;padding:0 0 0 32px}.dropdown a{color:#D0D6E2}.dropdown a,.settings a,.sidebar-list a{display:block;text-transform:none}.sidebar-list a{color:#D0D6E2}.dropdown a:after,.settings a:after,.sidebar-list a:after{content:"";display:table;clear:both}.dropdown .icon,.settings .icon,.sidebar-list .icon{float:right}.open .dropdown,.open .settings,.open .sidebar-list{display:block}.open .dropdown.collapse,.open .collapse.settings,.open .sidebar-list.collapse{display:none}.open .dropdown.collapse.in,.open .collapse.in.settings,.open .sidebar-list.collapse.in{display:block}.dropdown .unlinked .icon,.settings .unlinked .icon,.sidebar-list .unlinked .icon{opacity:.3}.dropdown.documents li,.documents.settings li,.sidebar-list.documents li{background-image:url("../img/icons/file.svg");background-position:240px center;background-repeat:no-repeat;background-size:14px 16px;padding:3px 32px}.dropdown.documents li.octocat,.documents.settings li.octocat,.sidebar-list.documents li.octocat{background-image:url("../img/icons/octocat.svg");background-position:234px center;background-size:24px 24px}.dropdown.documents li:last-child,.documents.settings li:last-child,.sidebar-list.documents li:last-child{margin-bottom:1rem}.dropdown.documents li.active a,.documents.settings li.active a,.sidebar-list.documents li.active a{color:#35D7BB}.settings{position:fixed;top:67px;right:16px;border-radius:3px;width:288px;background-color:#373D49;padding:16px;z-index:7}.show-settings .settings{display:block}.settings .has-checkbox{float:left}.settings form{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between}.settings input{width:20%}.settings a{font-size:1.25rem;font-family:"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;-webkit-font-smoothing:antialiased;line-height:28px;color:#D0D6E2}.settings a:after{content:"";display:table;clear:both}.settings a:hover{color:#35D7BB}.settings li{border-bottom:1px solid #4F535B;margin:0;padding:16px 0}.settings li:last-child{border-bottom:none}.brand{border:none;display:block}.brand:hover g{fill:#35D7BB}.toggle{display:block;float:left;height:16px;padding:25px 16px 26px;width:40px}.toggle span:after,.toggle span:before{content:'';left:0;position:absolute;top:-6px}.toggle span:after{top:6px}.toggle span{display:block;position:relative}.toggle span,.toggle span:after,.toggle span:before{-webkit-backface-visibility:hidden;backface-visibility:hidden;background-color:#D3DAEA;height:2px;transition:all .3s;width:20px}.open-menu .toggle span{background-color:transparent}.open-menu .toggle span:before{transform:rotate(45deg) translate(3px,3px)}.open-menu .toggle span:after{transform:rotate(-45deg) translate(5px,-6px)}.caret{display:inline-block;width:0;height:0;margin-left:6px;vertical-align:middle;position:relative;top:-1px;border-top:4px solid;border-right:4px solid transparent;border-left:4px solid transparent}.sidebar{overflow:auto;height:100%;padding-right:15px;padding-bottom:15px;width:285px}.sidebar-wrapper{-webkit-overflow-scrolling:touch;background-color:#2B2F36;left:0;height:100%;overflow-y:hidden;position:fixed;top:0;width:285px;z-index:1}.sidebar-branding{width:160px;padding:0;margin:16px auto}.header{border-bottom:1px solid #E8E8E8;position:relative}.words,.characters{line-height:1rem;font-size:.8rem;margin-bottom:.77999rem;padding-top:.22001rem;font-weight:500;font-family:"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif;letter-spacing:1px;text-transform:uppercase;z-index:5;position:absolute;right:16px;top:0}.words span,.characters span{color:#A0AABF}.words .counter,.characters .counter{color:#000}.words+.characters{top:22px}.mr10{margin-right:10px}.btn{text-align:center;display:inline-block;width:100%;text-transform:uppercase;font-weight:600;font-family:"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;text-shadow:0 1px 0 #1b8b77;padding:16px 24px;background-color:#35D7BB;border-radius:3px;margin:0 auto 16px;line-height:1;color:#fff;transition:all .15s linear;-webkit-font-smoothing:antialiased}.btn--new,.btn--save{display:block;width:238px}.btn--new:hover,.btn--new:focus,.btn--save:hover,.btn--save:focus{color:#fff;border-bottom-color:transparent;box-shadow:0 1px 3px #24b59c;text-shadow:0 1px 0 #24b59c}.btn--save{background-color:#4A5261;text-shadow:0 1px 1px #1e2127}.btn--save:hover,.btn--save:focus{color:#fff;border-bottom-color:transparent;box-shadow:0 1px 5px #08090a;text-shadow:none}.btn--delete{display:block;width:238px;background-color:transparent;font-size:12px;text-shadow:none}.btn--delete:hover,.btn--delete:focus{color:#fff;border-bottom-color:transparent;text-shadow:0 1px 0 #08090a;opacity:.8}.btn--delete-modal,.btn--ok,.btn--close{border-top:0;background-color:#4A5261;text-shadow:0 1px 0 #08090a;margin:0}.btn--delete-modal:hover,.btn--delete-modal:focus,.btn--ok:hover,.btn--ok:focus,.btn--close:hover,.btn--close:focus{color:#fff;background-color:#292d36;text-shadow:none}.btn--delete-modal{display:inline;width:auto}.overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(55,61,73,.8);transition:all .25s ease-in-out;transition-timing-function:ease-out;will-change:left,opacity,visibility;z-index:5;opacity:0;visibility:hidden}.show-settings .overlay{visibility:visible;opacity:1}.switch{float:right;line-height:1}.switch input{display:none}.switch small{display:inline-block;cursor:pointer;padding:0 24px 0 0;transition:all ease .2s;background-color:#2B2F36;border-color:#2B2F36}.switch small,.switch small:before{border-radius:30px;box-shadow:inset 0 0 2px 0 #14171F}.switch small:before{display:block;content:'';width:28px;height:28px;background:#fff}.switch.checked small{padding-right:0;padding-left:24px;background-color:#35D7BB;box-shadow:none}.modal--dillinger.about .modal-dialog{font-size:1.25rem;max-width:500px}.modal--dillinger.scope .modal-dialog{max-width:300px;margin:5rem auto}.modal--dillinger .modal-dialog{max-width:600px;width:auto;margin:5rem auto}.modal--dillinger .modal-content{background:#373D49;border-radius:3px;box-shadow:0 2px 5px 0 #2C3B59;color:#fff;font-family:"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;padding:2rem}.modal--dillinger ul{list-style-type:disc;margin:1rem 0;padding:0 0 0 1rem}.modal--dillinger li{padding:0;margin:0}.modal--dillinger .modal-header{border:0;padding:0}.modal--dillinger .modal-body{padding:0}.modal--dillinger .modal-footer{border:0;padding:0}.modal--dillinger .close{color:#fff;opacity:1}.modal-backdrop{background-color:#373D49}.pagination--dillinger{padding:0!important;margin:1.5rem 0!important;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-line-pack:stretch;align-content:stretch}.pagination--dillinger li{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;text-align:center}.pagination--dillinger li:first-child>a,.pagination--dillinger li.disabled>a,.pagination--dillinger li.disabled>a:hover,.pagination--dillinger li.disabled>a:focus,.pagination--dillinger li>a{background-color:transparent;border-color:#4F535B;border-right-color:transparent}.pagination--dillinger li.active>a,.pagination--dillinger li.active>a:hover,.pagination--dillinger li.active>a:focus{border-color:#4A5261;background-color:#4A5261;color:#fff}.pagination--dillinger li>a{float:none;color:#fff;width:100%;display:block;text-align:center;margin:0;border-right-color:transparent;padding:6px}.pagination--dillinger li>a:hover,.pagination--dillinger li>a:focus{border-color:#35D7BB;background-color:#35D7BB;color:#fff}.pagination--dillinger li:last-child a{border-color:#4F535B}.pagination--dillinger li:first-child a{border-right-color:transparent}.diNotify{position:absolute;z-index:9999;left:0;right:0;top:0;margin:0 auto;max-width:400px;text-align:center;transition:top .5s ease-in-out,opacity .5s ease-in-out;visibility:hidden}.diNotify-body{-webkit-font-smoothing:antialiased;background-color:#35D7BB;background:#666E7F;border-radius:3px;color:#fff;font-family:"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;overflow:hidden;padding:1rem 2rem .5rem;display:-ms-flexbox;display:flex;-ms-flex-align:baseline;align-items:baseline;-ms-flex-pack:center;justify-content:center}.diNotify-icon{display:block;width:16px;height:16px;line-height:16px;position:relative;top:3px}.diNotify-message{padding-left:1rem}.zen-wrapper{position:fixed;top:0;left:0;right:0;bottom:0;width:100%;height:100%;z-index:10;background-color:#FFF;opacity:0;transition:opacity .25s ease-in-out}.zen-wrapper.on{opacity:1}.enter-zen-mode{background-image:url("../img/icons/enter-zen.svg");right:.5rem;top:.313rem;display:none}.enter-zen-mode,.close-zen-mode{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;background-repeat:no-repeat;width:32px;height:32px;display:block;position:absolute}.close-zen-mode{background-image:url("../img/icons/exit-zen.svg");right:1rem;top:1rem}.zen-page{position:relative;top:0;bottom:0;z-index:11;height:100%;width:100%}#zen{font-size:1.25rem;width:300px;height:80%;margin:0 auto;position:relative;top:10%}#zen:before,#zen:after{content:"";position:absolute;height:10%;width:100%;z-index:12;pointer-events:none}#preview .table{width:auto}.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:.1px;z-index:99999;display:block}.ui-resizable-e{background-color:#666;border-right:8px solid #e8e8e8;border-left:1px solid #222;width:10px;z-index:88!important;position:relative}.ui-resizable-e:after{content:"-";display:block;position:absolute;top:calc(50% - 16px);left:0;height:25px;width:2px;background-color:rgba(0,0,0,.4);margin:3px}#editor{cursor:ew-resize;position:relative;z-index:auto}.profile-pic{float:left;width:250px}#_default_ a::before{color:#A0AABF}#_default_ img{display:none}#_default_ #_default_{display:block;float:left;max-width:38%;word-wrap:break-word}#_default_ .default-ad{display:none}#_default_ ._default_{display:block}#_default_ a{color:#35d7bb;text-decoration:none}#_default_ a:hover{color:#8ae8d8}#_default_ .default-image{display:none}#_default_ .default-title:after{content:""}#_default_ .default-title,#_default_ .default-text,#_default_ .default-description{display:inline}#_default_ .default-title{position:relative;font-weight:600;display:none}#_default_ a:before{position:relative;top:0;padding:5px;color:#a0aabf;content:"Ad";text-transform:uppercase;font-size:8px;font-family:Verdana,sans-serif}#_default_{display:block;float:left;max-width:38%;word-wrap:break-word}#_default_ ._default_{display:block;font-size:.75rem;height:51px;letter-spacing:1px;line-height:1rem;padding:18px 24px}body{max-width:1024px;margin:0 auto;overflow:auto;padding:2%}.split{overflow:scroll;padding:0!important;-webkit-overflow-scrolling:touch}.split-editor{padding-left:0;padding-right:0;position:relative;z-index:3}.show-preview .split-editor{display:none}.split-preview{background-color:#fff;display:none;top:0;position:relative;z-index:4}.show-preview .split-preview{display:block}#editor{font-size:1rem;font-family:"Ubuntu Mono",Monaco;font-weight:400;line-height:2rem;width:100%;height:100%}#editor .ace_gutter{-webkit-font-smoothing:antialiased}.editor-header{width:50%;float:left;border-bottom:1px solid #E8E8E8;position:relative}.editor-header--first{border-right:1px solid #E8E8E8}.editor-header .title{display:inline-block}.preview-html{padding:15px}.preview-html a{color:#A0AABF;text-decoration:underline}.preview-src{white-space:normal}.preview-mode-toggle-src{background-image:url("../img/icons/code.svg")}.preview-mode-toggle-src,.preview-mode-toggle-html{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;background-repeat:no-repeat;width:32px;height:32px;display:block;position:absolute;right:.5rem;top:.5rem;display:none}.preview-mode-toggle-html{background-image:url("../img/icons/eye.svg")}.sr-only{visibility:hidden;text-overflow:110%;overflow:hidden;top:-100px;position:absolute}.mnone{margin:0!important}@media screen and (min-width:27.5em){html{font-size:.875em}body{font-size:1rem}ul,ol{margin-bottom:.83999rem;padding-top:.16001rem}p{padding-top:.66001rem}p,pre{margin-bottom:1.33999rem}pre,blockquote p{font-size:1rem;padding-top:.66001rem}blockquote p{margin-bottom:.33999rem}h1{font-size:2.0571429rem;margin-bottom:.21999rem;padding-top:.78001rem}h2{font-size:1.953125rem;margin-bottom:.1835837rem;padding-top:.8164163rem}h3{font-size:1.6457143rem;margin-bottom:.07599rem;padding-top:.92401rem}h4{font-size:1.5625rem;margin-bottom:.546865rem;padding-top:.453135rem}h5{font-size:1.25rem;margin-bottom:-.56251rem;padding-top:.56251rem}h6{font-size:1rem;margin-bottom:-.65001rem;padding-top:.65001rem}.g{margin-left:-16px;margin-right:-16px}.g-b{padding-left:16px;padding-right:16px}.g-b--m1of1{width:100%}.g-b--m1of2,.g-b--m2of4,.g-b--m3of6,.g-b--m4of8,.g-b--m5of10,.g-b--m6of12{width:50%}.g-b--m1of3,.g-b--m2of6,.g-b--m4of12{width:33.333%}.g-b--m2of3,.g-b--m4of6,.g-b--m8of12{width:66.666%}.g-b--m1of4,.g-b--m2of8,.g-b--m3of12{width:25%}.g-b--m3of4,.g-b--m6of8,.g-b--m9of12{width:75%}.g-b--m1of5,.g-b--m2of10{width:20%}.g-b--m2of5,.g-b--m4of10{width:40%}.g-b--m3of5,.g-b--m6of10{width:60%}.g-b--m4of5,.g-b--m8of10{width:80%}.g-b--m1of6,.g-b--m2of12{width:16.666%}.g-b--m5of6,.g-b--m10of12{width:83.333%}.g-b--m1of8{width:12.5%}.g-b--m3of8{width:37.5%}.g-b--m5of8{width:62.5%}.g-b--m7of8{width:87.5%}.g-b--m1of10{width:10%}.g-b--m3of10{width:30%}.g-b--m7of10{width:70%}.g-b--m9of10{width:90%}.g-b--m1of12{width:8.333%}.g-b--m5of12{width:41.666%}.g-b--m7of12{width:58.333%}.g-b--m11of12{width:91.666%}.g-b--push--m1of1{margin-left:100%}.g-b--push--m1of2,.g-b--push--m2of4,.g-b--push--m3of6,.g-b--push--m4of8,.g-b--push--m5of10,.g-b--push--m6of12{margin-left:50%}.g-b--push--m1of3,.g-b--push--m2of6,.g-b--push--m4of12{margin-left:33.333%}.g-b--push--m2of3,.g-b--push--m4of6,.g-b--push--m8of12{margin-left:66.666%}.g-b--push--m1of4,.g-b--push--m2of8,.g-b--push--m3of12{margin-left:25%}.g-b--push--m3of4,.g-b--push--m6of8,.g-b--push--m9of12{margin-left:75%}.g-b--push--m1of5,.g-b--push--m2of10{margin-left:20%}.g-b--push--m2of5,.g-b--push--m4of10{margin-left:40%}.g-b--push--m3of5,.g-b--push--m6of10{margin-left:60%}.g-b--push--m4of5,.g-b--push--m8of10{margin-left:80%}.g-b--push--m1of6,.g-b--push--m2of12{margin-left:16.666%}.g-b--push--m5of6,.g-b--push--m10of12{margin-left:83.333%}.g-b--push--m1of8{margin-left:12.5%}.g-b--push--m3of8{margin-left:37.5%}.g-b--push--m5of8{margin-left:62.5%}.g-b--push--m7of8{margin-left:87.5%}.g-b--push--m1of10{margin-left:10%}.g-b--push--m3of10{margin-left:30%}.g-b--push--m7of10{margin-left:70%}.g-b--push--m9of10{margin-left:90%}.g-b--push--m1of12{margin-left:8.333%}.g-b--push--m5of12{margin-left:41.666%}.g-b--push--m7of12{margin-left:58.333%}.g-b--push--m11of12{margin-left:91.666%}.g-b--pull--m1of1{margin-right:100%}.g-b--pull--m1of2,.g-b--pull--m2of4,.g-b--pull--m3of6,.g-b--pull--m4of8,.g-b--pull--m5of10,.g-b--pull--m6of12{margin-right:50%}.g-b--pull--m1of3,.g-b--pull--m2of6,.g-b--pull--m4of12{margin-right:33.333%}.g-b--pull--m2of3,.g-b--pull--m4of6,.g-b--pull--m8of12{margin-right:66.666%}.g-b--pull--m1of4,.g-b--pull--m2of8,.g-b--pull--m3of12{margin-right:25%}.g-b--pull--m3of4,.g-b--pull--m6of8,.g-b--pull--m9of12{margin-right:75%}.g-b--pull--m1of5,.g-b--pull--m2of10{margin-right:20%}.g-b--pull--m2of5,.g-b--pull--m4of10{margin-right:40%}.g-b--pull--m3of5,.g-b--pull--m6of10{margin-right:60%}.g-b--pull--m4of5,.g-b--pull--m8of10{margin-right:80%}.g-b--pull--m1of6,.g-b--pull--m2of12{margin-right:16.666%}.g-b--pull--m5of6,.g-b--pull--m10of12{margin-right:83.333%}.g-b--pull--m1of8{margin-right:12.5%}.g-b--pull--m3of8{margin-right:37.5%}.g-b--pull--m5of8{margin-right:62.5%}.g-b--pull--m7of8{margin-right:87.5%}.g-b--pull--m1of10{margin-right:10%}.g-b--pull--m3of10{margin-right:30%}.g-b--pull--m7of10{margin-right:70%}.g-b--pull--m9of10{margin-right:90%}.g-b--pull--m1of12{margin-right:8.333%}.g-b--pull--m5of12{margin-right:41.666%}.g-b--pull--m7of12{margin-right:58.333%}.g-b--pull--m11of12{margin-right:91.666%}.splashscreen p{font-size:1.25rem;margin-bottom:1.43749rem;padding-top:.56251rem}.title{font-size:.8rem;margin-bottom:.77999rem;padding-top:.22001rem}.title-document{margin-bottom:.89999rem;padding-top:.10001rem}.title-document,.settings a{font-size:1.25rem}.words,.characters{font-size:.8rem;margin-bottom:.77999rem;padding-top:.22001rem}.modal--dillinger.about .modal-dialog,#zen{font-size:1.25rem}#zen{width:400px}#editor{font-size:1rem}}@media screen and (min-width:46.25em){html{font-size:.875em}body{font-size:1rem}ul,ol{margin-bottom:.83999rem;padding-top:.16001rem}p{padding-top:.66001rem}p,pre{margin-bottom:1.33999rem}pre,blockquote p{font-size:1rem;padding-top:.66001rem}blockquote p{margin-bottom:.33999rem}h1{font-size:2.0571429rem;margin-bottom:.21999rem;padding-top:.78001rem}h2{font-size:1.953125rem;margin-bottom:.1835837rem;padding-top:.8164163rem}h3{font-size:1.6457143rem;margin-bottom:.07599rem;padding-top:.92401rem}h4{font-size:1.5625rem;margin-bottom:.546865rem;padding-top:.453135rem}h5{font-size:1.25rem;margin-bottom:-.56251rem;padding-top:.56251rem}h6{font-size:1rem;margin-bottom:-.65001rem;padding-top:.65001rem}.g{margin-left:-16px;margin-right:-16px}.g-b{padding-left:16px;padding-right:16px}.g-b--t1of1{width:100%}.g-b--t1of2,.g-b--t2of4,.g-b--t3of6,.g-b--t4of8,.g-b--t5of10,.g-b--t6of12{width:50%}.g-b--t1of3,.g-b--t2of6,.g-b--t4of12{width:33.333%}.g-b--t2of3,.g-b--t4of6,.g-b--t8of12{width:66.666%}.g-b--t1of4,.g-b--t2of8,.g-b--t3of12{width:25%}.g-b--t3of4,.g-b--t6of8,.g-b--t9of12{width:75%}.g-b--t1of5,.g-b--t2of10{width:20%}.g-b--t2of5,.g-b--t4of10{width:40%}.g-b--t3of5,.g-b--t6of10{width:60%}.g-b--t4of5,.g-b--t8of10{width:80%}.g-b--t1of6,.g-b--t2of12{width:16.666%}.g-b--t5of6,.g-b--t10of12{width:83.333%}.g-b--t1of8{width:12.5%}.g-b--t3of8{width:37.5%}.g-b--t5of8{width:62.5%}.g-b--t7of8{width:87.5%}.g-b--t1of10{width:10%}.g-b--t3of10{width:30%}.g-b--t7of10{width:70%}.g-b--t9of10{width:90%}.g-b--t1of12{width:8.333%}.g-b--t5of12{width:41.666%}.g-b--t7of12{width:58.333%}.g-b--t11of12{width:91.666%}.g-b--push--t1of1{margin-left:100%}.g-b--push--t1of2,.g-b--push--t2of4,.g-b--push--t3of6,.g-b--push--t4of8,.g-b--push--t5of10,.g-b--push--t6of12{margin-left:50%}.g-b--push--t1of3,.g-b--push--t2of6,.g-b--push--t4of12{margin-left:33.333%}.g-b--push--t2of3,.g-b--push--t4of6,.g-b--push--t8of12{margin-left:66.666%}.g-b--push--t1of4,.g-b--push--t2of8,.g-b--push--t3of12{margin-left:25%}.g-b--push--t3of4,.g-b--push--t6of8,.g-b--push--t9of12{margin-left:75%}.g-b--push--t1of5,.g-b--push--t2of10{margin-left:20%}.g-b--push--t2of5,.g-b--push--t4of10{margin-left:40%}.g-b--push--t3of5,.g-b--push--t6of10{margin-left:60%}.g-b--push--t4of5,.g-b--push--t8of10{margin-left:80%}.g-b--push--t1of6,.g-b--push--t2of12{margin-left:16.666%}.g-b--push--t5of6,.g-b--push--t10of12{margin-left:83.333%}.g-b--push--t1of8{margin-left:12.5%}.g-b--push--t3of8{margin-left:37.5%}.g-b--push--t5of8{margin-left:62.5%}.g-b--push--t7of8{margin-left:87.5%}.g-b--push--t1of10{margin-left:10%}.g-b--push--t3of10{margin-left:30%}.g-b--push--t7of10{margin-left:70%}.g-b--push--t9of10{margin-left:90%}.g-b--push--t1of12{margin-left:8.333%}.g-b--push--t5of12{margin-left:41.666%}.g-b--push--t7of12{margin-left:58.333%}.g-b--push--t11of12{margin-left:91.666%}.g-b--pull--t1of1{margin-right:100%}.g-b--pull--t1of2,.g-b--pull--t2of4,.g-b--pull--t3of6,.g-b--pull--t4of8,.g-b--pull--t5of10,.g-b--pull--t6of12{margin-right:50%}.g-b--pull--t1of3,.g-b--pull--t2of6,.g-b--pull--t4of12{margin-right:33.333%}.g-b--pull--t2of3,.g-b--pull--t4of6,.g-b--pull--t8of12{margin-right:66.666%}.g-b--pull--t1of4,.g-b--pull--t2of8,.g-b--pull--t3of12{margin-right:25%}.g-b--pull--t3of4,.g-b--pull--t6of8,.g-b--pull--t9of12{margin-right:75%}.g-b--pull--t1of5,.g-b--pull--t2of10{margin-right:20%}.g-b--pull--t2of5,.g-b--pull--t4of10{margin-right:40%}.g-b--pull--t3of5,.g-b--pull--t6of10{margin-right:60%}.g-b--pull--t4of5,.g-b--pull--t8of10{margin-right:80%}.g-b--pull--t1of6,.g-b--pull--t2of12{margin-right:16.666%}.g-b--pull--t5of6,.g-b--pull--t10of12{margin-right:83.333%}.g-b--pull--t1of8{margin-right:12.5%}.g-b--pull--t3of8{margin-right:37.5%}.g-b--pull--t5of8{margin-right:62.5%}.g-b--pull--t7of8{margin-right:87.5%}.g-b--pull--t1of10{margin-right:10%}.g-b--pull--t3of10{margin-right:30%}.g-b--pull--t7of10{margin-right:70%}.g-b--pull--t9of10{margin-right:90%}.g-b--pull--t1of12{margin-right:8.333%}.g-b--pull--t5of12{margin-right:41.666%}.g-b--pull--t7of12{margin-right:58.333%}.g-b--pull--t11of12{margin-right:91.666%}.splashscreen-dillinger{width:500px}.splashscreen p{font-size:1.25rem;margin-bottom:1.43749rem;padding-top:.56251rem}.title{font-size:.8rem;margin-bottom:.77999rem;padding-top:.22001rem}.title-document{font-size:1.25rem;margin-bottom:.89999rem;padding-top:.10001rem}.menu .menu-item--save-to,.menu .menu-item--import-from{display:block}.menu .menu-item--preview,.menu .menu-item--save-to.in-sidebar,.menu .menu-item--import-from.in-sidebar{display:none}.settings a{font-size:1.25rem}.words,.characters{font-size:.8rem;margin-bottom:.77999rem;padding-top:.22001rem}.modal--dillinger.about .modal-dialog{font-size:1.25rem}.enter-zen-mode{display:block}.close-zen-mode{right:3rem;top:3rem}#zen{font-size:1.25rem;width:500px}.split-editor{border-right:1px solid #E8E8E8;float:left;padding-right:16px;width:50%}.show-preview .split-editor{display:block}.split-preview{display:block;float:right;position:relative;top:0;width:50%}#editor{font-size:1rem}.preview-mode-toggle-src,.preview-mode-toggle-html{display:block}}@media screen and (min-width:62.5em){html{font-size:.875em}body{font-size:1rem}ul,ol{margin-bottom:.83999rem;padding-top:.16001rem}p{padding-top:.66001rem}p,pre{margin-bottom:1.33999rem}pre,blockquote p{font-size:1rem;padding-top:.66001rem}blockquote p{margin-bottom:.33999rem}h1{font-size:2.0571429rem;margin-bottom:.21999rem;padding-top:.78001rem}h2{font-size:1.953125rem;margin-bottom:.1835837rem;padding-top:.8164163rem}h3{font-size:1.6457143rem;margin-bottom:.07599rem;padding-top:.92401rem}h4{font-size:1.5625rem;margin-bottom:.546865rem;padding-top:.453135rem}h5{font-size:1.25rem;margin-bottom:-.56251rem;padding-top:.56251rem}h6{font-size:1rem;margin-bottom:-.65001rem;padding-top:.65001rem}.g{margin-left:-16px;margin-right:-16px}.g-b{padding-left:16px;padding-right:16px}.g-b--d1of1{width:100%}.g-b--d1of2,.g-b--d2of4,.g-b--d3of6,.g-b--d4of8,.g-b--d5of10,.g-b--d6of12{width:50%}.g-b--d1of3,.g-b--d2of6,.g-b--d4of12{width:33.333%}.g-b--d2of3,.g-b--d4of6,.g-b--d8of12{width:66.666%}.g-b--d1of4,.g-b--d2of8,.g-b--d3of12{width:25%}.g-b--d3of4,.g-b--d6of8,.g-b--d9of12{width:75%}.g-b--d1of5,.g-b--d2of10{width:20%}.g-b--d2of5,.g-b--d4of10{width:40%}.g-b--d3of5,.g-b--d6of10{width:60%}.g-b--d4of5,.g-b--d8of10{width:80%}.g-b--d1of6,.g-b--d2of12{width:16.666%}.g-b--d5of6,.g-b--d10of12{width:83.333%}.g-b--d1of8{width:12.5%}.g-b--d3of8{width:37.5%}.g-b--d5of8{width:62.5%}.g-b--d7of8{width:87.5%}.g-b--d1of10{width:10%}.g-b--d3of10{width:30%}.g-b--d7of10{width:70%}.g-b--d9of10{width:90%}.g-b--d1of12{width:8.333%}.g-b--d5of12{width:41.666%}.g-b--d7of12{width:58.333%}.g-b--d11of12{width:91.666%}.g-b--push--d1of1{margin-left:100%}.g-b--push--d1of2,.g-b--push--d2of4,.g-b--push--d3of6,.g-b--push--d4of8,.g-b--push--d5of10,.g-b--push--d6of12{margin-left:50%}.g-b--push--d1of3,.g-b--push--d2of6,.g-b--push--d4of12{margin-left:33.333%}.g-b--push--d2of3,.g-b--push--d4of6,.g-b--push--d8of12{margin-left:66.666%}.g-b--push--d1of4,.g-b--push--d2of8,.g-b--push--d3of12{margin-left:25%}.g-b--push--d3of4,.g-b--push--d6of8,.g-b--push--d9of12{margin-left:75%}.g-b--push--d1of5,.g-b--push--d2of10{margin-left:20%}.g-b--push--d2of5,.g-b--push--d4of10{margin-left:40%}.g-b--push--d3of5,.g-b--push--d6of10{margin-left:60%}.g-b--push--d4of5,.g-b--push--d8of10{margin-left:80%}.g-b--push--d1of6,.g-b--push--d2of12{margin-left:16.666%}.g-b--push--d5of6,.g-b--push--d10of12{margin-left:83.333%}.g-b--push--d1of8{margin-left:12.5%}.g-b--push--d3of8{margin-left:37.5%}.g-b--push--d5of8{margin-left:62.5%}.g-b--push--d7of8{margin-left:87.5%}.g-b--push--d1of10{margin-left:10%}.g-b--push--d3of10{margin-left:30%}.g-b--push--d7of10{margin-left:70%}.g-b--push--d9of10{margin-left:90%}.g-b--push--d1of12{margin-left:8.333%}.g-b--push--d5of12{margin-left:41.666%}.g-b--push--d7of12{margin-left:58.333%}.g-b--push--d11of12{margin-left:91.666%}.g-b--pull--d1of1{margin-right:100%}.g-b--pull--d1of2,.g-b--pull--d2of4,.g-b--pull--d3of6,.g-b--pull--d4of8,.g-b--pull--d5of10,.g-b--pull--d6of12{margin-right:50%}.g-b--pull--d1of3,.g-b--pull--d2of6,.g-b--pull--d4of12{margin-right:33.333%}.g-b--pull--d2of3,.g-b--pull--d4of6,.g-b--pull--d8of12{margin-right:66.666%}.g-b--pull--d1of4,.g-b--pull--d2of8,.g-b--pull--d3of12{margin-right:25%}.g-b--pull--d3of4,.g-b--pull--d6of8,.g-b--pull--d9of12{margin-right:75%}.g-b--pull--d1of5,.g-b--pull--d2of10{margin-right:20%}.g-b--pull--d2of5,.g-b--pull--d4of10{margin-right:40%}.g-b--pull--d3of5,.g-b--pull--d6of10{margin-right:60%}.g-b--pull--d4of5,.g-b--pull--d8of10{margin-right:80%}.g-b--pull--d1of6,.g-b--pull--d2of12{margin-right:16.666%}.g-b--pull--d5of6,.g-b--pull--d10of12{margin-right:83.333%}.g-b--pull--d1of8{margin-right:12.5%}.g-b--pull--d3of8{margin-right:37.5%}.g-b--pull--d5of8{margin-right:62.5%}.g-b--pull--d7of8{margin-right:87.5%}.g-b--pull--d1of10{margin-right:10%}.g-b--pull--d3of10{margin-right:30%}.g-b--pull--d7of10{margin-right:70%}.g-b--pull--d9of10{margin-right:90%}.g-b--pull--d1of12{margin-right:8.333%}.g-b--pull--d5of12{margin-right:41.666%}.g-b--pull--d7of12{margin-right:58.333%}.g-b--pull--d11of12{margin-right:91.666%}.splashscreen-dillinger{width:700px}.splashscreen p{font-size:1.25rem;margin-bottom:1.43749rem;padding-top:.56251rem}.title{font-size:.8rem;margin-bottom:.77999rem;padding-top:.22001rem}.title-document{font-size:1.25rem;margin-bottom:.89999rem;padding-top:.10001rem}.menu .menu-item--export-as{display:block}.menu .menu-item--preview{display:none}.settings a{font-size:1.25rem}.words,.characters{font-size:.8rem;margin-bottom:.77999rem;padding-top:.22001rem}.modal--dillinger.about .modal-dialog,#zen{font-size:1.25rem}#zen{width:700px}#editor{font-size:1rem}}@media screen and (min-width:87.5em){html{font-size:.875em}body{font-size:1rem}ul,ol{margin-bottom:.83999rem;padding-top:.16001rem}p{padding-top:.66001rem}p,pre{margin-bottom:1.33999rem}pre,blockquote p{font-size:1rem;padding-top:.66001rem}blockquote p{margin-bottom:.33999rem}h1{font-size:2.0571429rem;margin-bottom:.21999rem;padding-top:.78001rem}h2{font-size:1.953125rem;margin-bottom:.1835837rem;padding-top:.8164163rem}h3{font-size:1.6457143rem;margin-bottom:.07599rem;padding-top:.92401rem}h4{font-size:1.5625rem;margin-bottom:.546865rem;padding-top:.453135rem}h5{font-size:1.25rem;margin-bottom:-.56251rem;padding-top:.56251rem}h6{font-size:1rem;margin-bottom:-.65001rem;padding-top:.65001rem}.splashscreen-dillinger{width:800px}.splashscreen p{font-size:1.25rem;margin-bottom:1.43749rem;padding-top:.56251rem}.title{font-size:.8rem;margin-bottom:.77999rem;padding-top:.22001rem}.title-document{margin-bottom:.89999rem;padding-top:.10001rem}.title-document,.settings a{font-size:1.25rem}.words,.characters{font-size:.8rem;margin-bottom:.77999rem;padding-top:.22001rem}.modal--dillinger.about .modal-dialog,#zen{font-size:1.25rem}#editor{font-size:1rem}}@media (min-width:768px){.form-inline .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}.form-inline .input-group{display:inline-table;vertical-align:middle}.form-inline .input-group .input-group-addon,.form-inline .input-group .input-group-btn,.form-inline .input-group .form-control{width:auto}.form-inline .input-group>.form-control{width:100%}.form-inline .control-label{margin-bottom:0;vertical-align:middle}.form-inline .radio,.form-inline .checkbox{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.form-inline .radio label,.form-inline .checkbox label{padding-left:0}.form-inline .radio input[type="radio"],.form-inline .checkbox input[type="checkbox"]{position:relative;margin-left:0}.form-inline .has-feedback .form-control-feedback{top:0}.form-horizontal .control-label{text-align:right;margin-bottom:0;padding-top:7px}.form-horizontal .form-group-lg .control-label{padding-top:14.3px}.form-horizontal .form-group-sm .control-label{padding-top:6px}.modal-dialog{width:600px;margin:30px auto}.modal-content{box-shadow:0 5px 15px rgba(0,0,0,.5)}.modal-sm{width:300px}}@media (min-width:992px){.modal-lg{width:900px}}@media screen and (max-width:1200px){#_default_{max-width:30%}#_default_ ._default_{font-size:.825rem;line-height:.875rem;padding:12px 12px 6px 24px;text-align:justify}}@media screen and (max-width:1100px){#_default_{max-width:27%}#_default_ ._default_{font-size:.8rem;line-height:.85rem;padding:12px 6px 6px 24px;text-align:justify}}@media screen and (max-width:1000px){#_default_{max-width:24%}#_default_ ._default_{font-size:.775rem;line-height:.8rem;padding:12px 6px 6px 24px;text-align:justify}}@media screen and (max-width:900px){#_default_{max-width:30%}}@media screen and (max-width:767px){.table-responsive{width:100%;margin-bottom:15px;overflow-y:hidden;overflow-x:auto;-ms-overflow-style:-ms-autohiding-scrollbar;border:1px solid #ddd;-webkit-overflow-scrolling:touch}.table-responsive>.table{margin-bottom:0}.table-responsive>.table>thead>tr>th,.table-responsive>.table>thead>tr>td,.table-responsive>.table>tbody>tr>th,.table-responsive>.table>tbody>tr>td,.table-responsive>.table>tfoot>tr>th,.table-responsive>.table>tfoot>tr>td{white-space:nowrap}.table-responsive>.table-bordered{border:0}.table-responsive>.table-bordered>thead>tr>th:first-child,.table-responsive>.table-bordered>thead>tr>td:first-child,.table-responsive>.table-bordered>tbody>tr>th:first-child,.table-responsive>.table-bordered>tbody>tr>td:first-child,.table-responsive>.table-bordered>tfoot>tr>th:first-child,.table-responsive>.table-bordered>tfoot>tr>td:first-child{border-left:0}.table-responsive>.table-bordered>thead>tr>th:last-child,.table-responsive>.table-bordered>thead>tr>td:last-child,.table-responsive>.table-bordered>tbody>tr>th:last-child,.table-responsive>.table-bordered>tbody>tr>td:last-child,.table-responsive>.table-bordered>tfoot>tr>th:last-child,.table-responsive>.table-bordered>tfoot>tr>td:last-child{border-right:0}.table-responsive>.table-bordered>tbody>tr:last-child>th,.table-responsive>.table-bordered>tbody>tr:last-child>td,.table-responsive>.table-bordered>tfoot>tr:last-child>th,.table-responsive>.table-bordered>tfoot>tr:last-child>td{border-bottom:0}}@media screen and (max-width:720px){#_default_{max-width:60%}#_default_ ._default_{font-size:.75rem;line-height:1rem;padding:12px 24px}}@media screen and (max-width:620px){#_default_{max-width:50%}#_default_ ._default_{font-size:.66rem;letter-spacing:1px;line-height:1rem;padding:10px 24px}}@media screen and (max-width:520px){#_default_ ._default_{font-size:.4rem;line-height:.875rem;padding:6px 12px 6px 24px;text-align:justify}}@media screen and (max-width:460px){#_default_{display:none}}@media screen and (max-width:46.1875em){.editor-header{display:none}.editor-header--first{display:block;width:100%}}</style></head><body id="preview">
<h1 class="code-line" data-line-start=0 data-line-end=1><a id="Continuit_du_machine_learning_0"></a>Continuit du machine learning</h1>
<p class="has-line-data" data-line-start="2" data-line-end="4">Travail sur <strong>TensorFlow</strong> afin de construire des rseaux de neurones.<br>
Cet outil est ddi au deep learning.</p>
<p class="has-line-data" data-line-start="5" data-line-end="7">Il est utilisable pour entraner des modles se trouvant sur le web (NodeJS), sur les<br>
applications mobiles, ou sur des environnements de production (cloud, serveur)</p>
<p class="has-line-data" data-line-start="8" data-line-end="9">On va lutiliser en local.</p>
<p class="has-line-data" data-line-start="10" data-line-end="11">Pour linstaller : <code>pip install tensorflow</code></p>
<p class="has-line-data" data-line-start="12" data-line-end="15"><strong>Keras</strong> a t intgr  TensorFlow : il sagit dune API qui permet deffectuer des<br>
oprations de hauts niveaux. Avant cette intgration, TensorFlow ne pouvait effectuer<br>
des oprations que de bas niveau.</p>
<p class="has-line-data" data-line-start="16" data-line-end="19">Il est ncessaire de bnficier dun GPU pour faire du traitement dimages en grande<br>
quantit, pour le deep learning. Avoir une carte graphique spar du processeur<br>
(NVIDIA, AMD, etcdonc hors-chipset), est important ici.</p>
<p class="has-line-data" data-line-start="20" data-line-end="24">On peut passer par <em>colaboratory</em> afin de bnficier de notebooks qui sexcutent via<br>
des machines virtuelles offertes par google, offrant des ressources systmes plus<br>
pousses. <em>colaboratory</em> est intressant si on ne possde pas de carte graphique sur sa<br>
machine.</p>
<p class="has-line-data" data-line-start="25" data-line-end="27">Il faut activer le GPU pour le notebook : <code>Excution &gt; Modifier le type d'excution &gt; mettre la valeur  &quot;GPU&quot;</code></p>
<p class="has-line-data" data-line-start="28" data-line-end="31">Pour le moment on va tudier un jeu de donnes classique (dataframe via pandas) :<br>
artificial_generator.xlsx Ce fichier contient deux jeux de donnes (2 feuilles :<br>
data2 et data4) : tous les deux voquent des problmes de classification.</p>
<ul>
<li class="has-line-data" data-line-start="32" data-line-end="33">X1 et X2 font rfrence aux donnes entrantes</li>
<li class="has-line-data" data-line-start="33" data-line-end="35">Y fait rfrence  loutput dsir / au label</li>
</ul>
<p class="has-line-data" data-line-start="35" data-line-end="37">tant donn que nous avons deux feuilles dans ce fichier excel, la syntaxe pour lire<br>
une feuille pour ensuite la convertir en dataframe est la suivante :</p>
<pre><code class="has-line-data" data-line-start="39" data-line-end="41" class="language-py">data4 = pd.read_excel(<span class="hljs-string">'artificial_generator.xlsx'</span>, sheet_name=<span class="hljs-string">"data4"</span>)
</code></pre>
<p class="has-line-data" data-line-start="41" data-line-end="43">Comme on a affaire  un problme de classification, il faut labelliser / numriser les<br>
labels : en loccurrence ici la colonne Y :</p>
<pre><code class="has-line-data" data-line-start="45" data-line-end="49" class="language-py">le = LabelEncoder()
data2[<span class="hljs-string">'Y'</span>] = le.fit_transform(data2[<span class="hljs-string">'Y'</span>])
data4[<span class="hljs-string">'Y'</span>] = le.fit_transform(data4[<span class="hljs-string">'Y'</span>])
</code></pre>
<p class="has-line-data" data-line-start="49" data-line-end="51">On peut observer la rpartition des donnes en fonction de leur label via un <strong>un nuage<br>
de point</strong>.</p>
<pre><code class="has-line-data" data-line-start="53" data-line-end="65" class="language-py"><span class="hljs-comment"># Nous spcifions X1 en abscisse, X2 en ordonne, et ns utilisons Y pour distinguer</span>
les points.

plt.figure(figsize = ( <span class="hljs-number">20</span> , <span class="hljs-number">10</span> ))
plt.subplot( <span class="hljs-number">2</span> , <span class="hljs-number">1</span> , <span class="hljs-number">1</span> )
plt.scatter(data2[<span class="hljs-string">'X1'</span>], data2[<span class="hljs-string">'X2'</span>], c = data2[<span class="hljs-string">'Y'</span>], edgecolors=<span class="hljs-string">'red'</span>)

plt.title(<span class="hljs-string">"data2"</span>) <span class="hljs-comment"># affichage du graphique pour la feuille "data2"</span>
plt.subplot( <span class="hljs-number">2</span> , <span class="hljs-number">1</span> , <span class="hljs-number">2</span> )
plt.scatter(data4[<span class="hljs-string">'X1'</span>], data4[<span class="hljs-string">'X2'</span>], c = data4[<span class="hljs-string">'Y'</span>], edgecolors=<span class="hljs-string">'red'</span>)
plt.title(<span class="hljs-string">'data4'</span>) <span class="hljs-comment"># affichage du graphique pour la feuille "data4"</span>
</code></pre>
<p class="has-line-data" data-line-start="65" data-line-end="68">Les rseaux de neurones permettent de rpondre  des problmes de classification<br>
complexes. Lorsque la rpartition du jeu de donnes est trop complexe (rpartition en<br>
cocentrique)</p>
<h1 class="code-line" data-line-start=69 data-line-end=70><a id="Construction_dun_rseau_de_neurones_69"></a>Construction dun rseau de neurones</h1>
<p class="has-line-data" data-line-start="71" data-line-end="72">Dfinition des termes :</p>
<ul>
<li class="has-line-data" data-line-start="73" data-line-end="77">
<p class="has-line-data" data-line-start="73" data-line-end="76">Couche dentre : les neurones qui recoivent linformation, on a x neurones<br>
pour x colonnes dans le dataframe Chaque neurone possde un poids ( w ) qui est<br>
rparti alatoirement.</p>
</li>
<li class="has-line-data" data-line-start="77" data-line-end="82">
<p class="has-line-data" data-line-start="77" data-line-end="81">Fonction dactivation (= fonction dterministe) : intermdiaire entre les<br>
donnes en entre et en sortie, cet intermdiaire dtermine les donnes qui<br>
doivent tre envoys en dune couche  une autre ou pas. Il sagit dune fonction mathmatique<br>
(tangente, sigmod). La fonction dactivation est trs utile pour rsoudre des problmes non-linaires, comme un problme de classification.</p>
</li>
<li class="has-line-data" data-line-start="82" data-line-end="88">
<p class="has-line-data" data-line-start="82" data-line-end="87">Couche cache (= couche intermdiaire) : des neurones qui recoivent<br>
linformation transmise par la couche dentre. Il est possible rajouter autant<br>
de couches caches quon veut : plus il y a des couches caches, plus on parle<br>
de rseau de neurone profond ( deep ). Dans le cas contraire, on parle de rseau<br>
de neurones creux ( shallow )</p>
</li>
<li class="has-line-data" data-line-start="88" data-line-end="91">
<p class="has-line-data" data-line-start="88" data-line-end="90">Couche de sortie : couche de neurones finale qui va envoyer loutput final de<br>
la donne envoye</p>
</li>
</ul>
<p class="has-line-data" data-line-start="91" data-line-end="92"><strong>Mcanisme de calcul :</strong></p>
<ul>
<li class="has-line-data" data-line-start="93" data-line-end="94">On reoit les donnes en entre</li>
<li class="has-line-data" data-line-start="94" data-line-end="95">On applique lopration x*w</li>
<li class="has-line-data" data-line-start="95" data-line-end="96">La fonction dactivation est ensuite applique  ce rsultat</li>
<li class="has-line-data" data-line-start="96" data-line-end="98">On passe  la couche de neurone suivante</li>
</ul>
<p class="has-line-data" data-line-start="98" data-line-end="101">Comme on a affaire  un <strong>apprentissage supervis</strong> on peut faire la diffrence entre le rsultat qui est <strong>souhait</strong> et le rsultat qui est <strong>calcul</strong> par le rseau de neurones.<br>
Cette diffrence est calcul par le rseau de neurones  la fin, et le rsultat de cette diffrence sera propage ( <em>backdrop</em> : rtro-propagation) sur les poids des<br>
neurones : certains seront mis  jour, dautres non.</p>
<p class="has-line-data" data-line-start="102" data-line-end="103">Le rseau de neurones permet donc, grce  cette mise  jour, dapprendre de ses erreurs, donc de progresser.</p>
<p class="has-line-data" data-line-start="104" data-line-end="106">Il y a trois faons de construire un rseau de neurones : <strong>squentielle</strong> , <strong>fonctionnelle</strong> ,<br>
et par <strong>sous-classes</strong>.</p>
<p class="has-line-data" data-line-start="107" data-line-end="109">Construction dun rseau de neurones fonctionnel (permet de raliser des modles plus<br>
complexes):</p>
<pre><code class="has-line-data" data-line-start="111" data-line-end="125" class="language-py"><span class="hljs-comment"># Exemple de cration d'un NN avec `Functional API`</span>
<span class="hljs-keyword">from</span> tensorflow.keras.models <span class="hljs-keyword">import</span> Model

<span class="hljs-keyword">from</span> tensorflow.keras.layers <span class="hljs-keyword">import</span> Input, Dense

<span class="hljs-comment"># Couche d'entre avec deux neurones</span>
inputs = Input(shape=( <span class="hljs-number">2</span> ,))
<span class="hljs-comment"># inputs.get_shape()</span>
<span class="hljs-comment"># inputs.name</span>
<span class="hljs-comment"># Couches caches comme fonction d'activation 'relu' :</span>
x = Dense( <span class="hljs-number">3</span> , activation=<span class="hljs-string">'relu'</span>)(inputs)
<span class="hljs-comment"># la variable x sera appliqu  la couche cache suivante :</span>
x = Dense( <span class="hljs-number">3</span> , activation=<span class="hljs-string">'relu'</span>)(x)
</code></pre>
<pre><code class="has-line-data" data-line-start="126" data-line-end="132"># Comme il s'agit de la dernire instance Dense, il s'agit de la couche de sortie
outputs = Dense( 3 , activation='softmax')(x)

# Cration du modle
model = Model(inputs=inputs, outputs=outputs)
</code></pre>
<p class="has-line-data" data-line-start="132" data-line-end="134">Construction dun rseau de neurones de manire squentielle (plus simple, mais plus<br>
limite):</p>
<pre><code class="has-line-data" data-line-start="136" data-line-end="143" class="language-py">model = Sequential([
Dense( <span class="hljs-number">3</span> , activation=<span class="hljs-string">'relu'</span>, input_shape=( <span class="hljs-number">4</span> ,)), <span class="hljs-comment"># couche d'entre car possde</span>
input_shape
Dense( <span class="hljs-number">10</span> , activation=<span class="hljs-string">'relu'</span>),
Dense( <span class="hljs-number">3</span> , activation=<span class="hljs-string">'softmax'</span>)
]) <span class="hljs-comment"># on n'crit pas la donne qui est insre dans chaque couche</span>
</code></pre>
<p class="has-line-data" data-line-start="143" data-line-end="144">Rpartition du rseau de neurones avec la fonction get_weights() du modle :</p>
<pre><code class="has-line-data" data-line-start="146" data-line-end="158">[array([[-0.14119095, 0.0544771 , -0.0071274 ], # poids associs au neurone x
[-0.9484316 , -0.31077462, 0.204157 ]], dtype=float32), # poids associs au
neurone x
# tableau de biais : ici le tableau du biais est zro car la modle n'a pas encore t
entran
array([0., 0., 0.], dtype=float32),
# pour rappel, le biais dsigne le taux d'erreur entre 0 et 1
array([[-0.8759022 ],
[-0.2409901 ],
[-0.40759063]], dtype=float32),
array([0.], dtype=float32)]
</code></pre>
<p class="has-line-data" data-line-start="158" data-line-end="159">Excution de la fonction get_summary() :</p>
<pre><code class="has-line-data" data-line-start="161" data-line-end="171">Layer (type) Output Shape Param #
=================================================================
dense_10 (Dense) (None, 3) 9
_________________________________________________________________
dense_11 (Dense) (None, 1) 4
=================================================================
Total params: 13 # nous avons 13 paramtres, donc 13 neurones dans notre rseau
Trainable params: 13
Non-trainable params: 0
</code></pre>
<p class="has-line-data" data-line-start="172" data-line-end="174">Le <code>get_summary()</code> peut avoir une reprsentation diffrente si la construction du<br>
rseau de neurones est diffrente. Ici pour un rseau de neurones fonctionnel :</p>
<pre><code class="has-line-data" data-line-start="176" data-line-end="194" class="language-py"><span class="hljs-comment"># Exemple de cration d'un NN avec `Functional API`</span>
<span class="hljs-keyword">from</span> tensorflow.keras.models <span class="hljs-keyword">import</span> Model
<span class="hljs-keyword">from</span> tensorflow.keras.layers <span class="hljs-keyword">import</span> Input, Dense

<span class="hljs-comment"># Couche d'entre</span>
inputs = Input(shape=( <span class="hljs-number">2</span> ,))
<span class="hljs-comment"># inputs.get_shape()</span>
<span class="hljs-comment"># inputs.name</span>

<span class="hljs-comment"># Couches caches :</span>
x = Dense( <span class="hljs-number">3</span> , activation=<span class="hljs-string">'relu'</span>)(inputs)
x = Dense( <span class="hljs-number">3</span> , activation=<span class="hljs-string">'relu'</span>)(x)

<span class="hljs-comment"># Couche de sortie</span>
outputs = Dense( <span class="hljs-number">3</span> , activation=<span class="hljs-string">'softmax'</span>)(x)

model = Model(inputs=inputs, outputs=outputs)
</code></pre>
<p class="has-line-data" data-line-start="194" data-line-end="195">On obtient la reprsentation suivante, qui est un peu plus aise  lire :</p>
<pre><code class="has-line-data" data-line-start="197" data-line-end="213"># on peut dterminer la couche d'entre grce  InputLayer
_________________________________________________________________
Layer (type) Output Shape Param #
=================================================================
input_4 (InputLayer) [(None, 2)] 0
_________________________________________________________________
dense_11 (Dense) (None, 3) 9
_________________________________________________________________
dense_12 (Dense) (None, 3) 12
_________________________________________________________________
dense_13 (Dense) (None, 3) 12
=================================================================
Total params: 33
Trainable params: 33
Non-trainable params: 0
</code></pre>
<p class="has-line-data" data-line-start="213" data-line-end="215">Il est possible quune machine puisse partir sur le mme rseau de neurones en<br>
<strong>chargeant un fichier contenant les poids de ce rseau de neurones</strong>.</p>
<p class="has-line-data" data-line-start="216" data-line-end="217">Pour sauvegarder les poids : &lt;model&gt;.save_weights(path)</p>
<p class="has-line-data" data-line-start="218" data-line-end="219">Pour compiler le modle afin quil soit prt  utilisation en production :</p>
<pre><code class="has-line-data" data-line-start="221" data-line-end="231" class="language-py"><span class="hljs-comment"># optmizer = manire d'actualiser les poids aprs backdrop</span>
<span class="hljs-comment"># loss = calculer l'erreur : ici il s'agit d'une classification binaire -&gt;</span>
binary_crossentropy
model.compile(optimizer=<span class="hljs-string">'rmsprop'</span>, loss=<span class="hljs-string">'binary_crossentropy'</span>, metrics=[<span class="hljs-string">'accuracy'</span>])
<span class="hljs-comment"># construction du modle</span>
<span class="hljs-comment"># epochs = nombre d'itrations</span>

model.fit(data,labels,epochs= <span class="hljs-number">10</span> ,batch_size= <span class="hljs-number">32</span> )
model.predict(data)
</code></pre>
<h1 class="code-line" data-line-start=231 data-line-end=232><a id="Rseau_de_neurones__convolution_traitement_dimages_231"></a>Rseau de neurones  convolution (traitement dimages)</h1>
<p class="has-line-data" data-line-start="233" data-line-end="236">La <strong>convolution</strong> en traitement dimage, est une technique permettant dextraire des informations dune image.<br>
Il sagit dune opration mathmatique, effectue <strong>sur la matrice de limage</strong>.<br>
Une nouvelle matrice est donne en rsultat, et cette matrice permet deffectuer des oprations pertinentes pour la rcupration dinformations dune image : dtection des contours, amlioration de la nettet</p>
<p class="has-line-data" data-line-start="237" data-line-end="238"><strong>Reprise du TP cats VS Dogs</strong></p>
<p class="has-line-data" data-line-start="239" data-line-end="240">Sources :</p>
<p class="has-line-data" data-line-start="241" data-line-end="242"><a href="https://colab.research.google.com/github/google/eng-edu/blob/master/ml/pc/exercises/image_classification_part1.ipynb">Notebook</a></p>
<p class="has-line-data" data-line-start="243" data-line-end="244"><a href="https://storage.googleapis.com/mledu-datasets/cats_and_dogs_filtered.zip">Jeu de donnes</a></p>
<p class="has-line-data" data-line-start="245" data-line-end="246"><a href="https://deeplizard.com/learn/video/LhEMXbjGV_4">Sest inspir de ce tutoriel</a></p>
<pre><code class="has-line-data" data-line-start="248" data-line-end="284" class="language-py"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> matplotlib.image <span class="hljs-keyword">import</span> imread
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
<span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf
<span class="hljs-keyword">from</span> tensorflow.keras <span class="hljs-keyword">import</span> layers, Model
<span class="hljs-keyword">import</span> zipfile

<span class="hljs-comment"># lecture des diffrentes images</span>
<span class="hljs-comment"># Une boucle pr afficher plusieurs images dans une figure</span>

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">9</span>):
    plt.subplot(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>, i+<span class="hljs-number">1</span>)
    filename = <span class="hljs-string">'train/'</span> + <span class="hljs-string">'cats/'</span> + <span class="hljs-string">'cat.'</span> + str(i) + <span class="hljs-string">'.jpg'</span>
    image = imread(filename)
    plt.imshow(image)
    plt.title(image.shape)

<span class="hljs-comment"># S : On constate que les images sont en mode paysage, mode portrait et de diffrentes tailles  </span>
<span class="hljs-comment"># =&gt; Ceci peut poser des Pb pour la perfermonce du classifieur. Il nous faut un classifieur robuste !</span>

<span class="hljs-comment"># Manip avec PIL : pkg Python de rf pr le traitement d'image</span>
<span class="hljs-comment"># dog1 = Image.open('train/dogs/dog.1.jpg')</span>
<span class="hljs-comment"># dog1.show()</span>
<span class="hljs-comment"># dog1.size</span>
<span class="hljs-comment"># dog1.mode</span>
<span class="hljs-comment"># dog1.format</span>
<span class="hljs-comment"># np.array(dog1)</span>
<span class="hljs-comment"># imread('train/dogs/dog.1.jpg')</span>

<span class="hljs-comment"># traitement de l'image directement avec keras</span>
dog1 = tf.keras.preprocessing.image.load_img(<span class="hljs-string">'train/dogs/dog.1.jpg'</span>)
dog1_ = tf.keras.preprocessing.image.img_to_array(dog1)

</code></pre>
<p class="has-line-data" data-line-start="285" data-line-end="286">Pour faciliter le traitement, on met les images  la mme chelle :</p>
<pre><code class="has-line-data" data-line-start="288" data-line-end="291" class="language-py">train_datagen = tf.keras.preprocessing.image.ImageDataGenerator(rescale=<span class="hljs-number">1.</span>/<span class="hljs-number">255</span>)
val_datagen = tf.keras.preprocessing.image.ImageDataGenerator(rescale=<span class="hljs-number">1.</span>/<span class="hljs-number">255</span>)
</code></pre>
<p class="has-line-data" data-line-start="292" data-line-end="294">Puis ensuite, pour les groupes dimage dentranement et de test, on indique quon souhaite obtenir des images de 150x150, toujours dans loptique de faciliter le traitement des images.<br>
<strong>Plus lhomognit est grande</strong>, mieux le traitement sera performant.</p>
<pre><code class="has-line-data" data-line-start="296" data-line-end="310" class="language-py">train_gen = train_datagen.flow_from_directory(
    <span class="hljs-string">'train'</span>, <span class="hljs-comment"># nom du dossier</span>
    target_size=(<span class="hljs-number">150</span>, <span class="hljs-number">150</span>), 
    batch_size=<span class="hljs-number">20</span>, <span class="hljs-comment"># on prcise qu'on souhaite lire les images par groupe de 20 (batch)</span>
    class_mode=<span class="hljs-string">'binary'</span> <span class="hljs-comment"># il s'agit de rsoudre un problme de classification binaire</span>
)

val_gen = val_datagen.flow_from_directory(
    <span class="hljs-string">'validation'</span>, 
    target_size=(<span class="hljs-number">150</span>, <span class="hljs-number">150</span>), 
    batch_size=<span class="hljs-number">20</span>, 
    class_mode=<span class="hljs-string">'binary'</span>
)
</code></pre>
<p class="has-line-data" data-line-start="311" data-line-end="312">Voici une fonction utilitaire qui nous sera utile pour afficher les diffrentes images :</p>
<pre><code class="has-line-data" data-line-start="314" data-line-end="323" class="language-py"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">plotImages</span><span class="hljs-params">(images_arr)</span>:</span>
    fig, axes = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, figsize=(<span class="hljs-number">20</span>,<span class="hljs-number">20</span>))
    axes = axes.flatten()
    <span class="hljs-keyword">for</span> img, ax <span class="hljs-keyword">in</span> zip( images_arr, axes):
        ax.imshow(img)
        ax.axis(<span class="hljs-string">'off'</span>)
    plt.tight_layout()
    plt.show()
</code></pre>
<p class="has-line-data" data-line-start="324" data-line-end="326">Les objets retourns par <code>ImageDataGenerator</code> sont de type <code>tensorflow.python.keras.preprocessing.image.DirectoryIterator</code>.<br>
Pour pouvoir lire les images, il faut invoquer la fonction <code>next</code> :</p>
<pre><code class="has-line-data" data-line-start="328" data-line-end="334" class="language-py"><span class="hljs-comment"># Visualiser les images resizs et rescals</span>
<span class="hljs-comment"># On a dj les labels de chaque image.</span>
<span class="hljs-comment"># En effet, un label = le dossier contenant l'image</span>
imgs, labels = next(val_gen)
imgs <span class="hljs-comment"># affichera 20 matrices numpy (une matrice = une image)</span>
</code></pre>
<p class="has-line-data" data-line-start="335" data-line-end="336">Construction du CNN (mthode fonctionnelle -&gt; on ne passe pas par <code>add</code> qui est squentielle) :</p>
<pre><code class="has-line-data" data-line-start="338" data-line-end="368" class="language-py"><span class="hljs-keyword">from</span> tensorflow.keras <span class="hljs-keyword">import</span> layers
<span class="hljs-keyword">from</span> tensorflow.keras <span class="hljs-keyword">import</span> Model

<span class="hljs-comment"># signifie qu'on souhaite insrer des images qui font 150 x 150</span>
<span class="hljs-comment"># et qui est compos d'une matrice de 3 couleurs (RGB) </span>
img_input = layers.input(shape=(<span class="hljs-number">150</span>,<span class="hljs-number">150</span>,<span class="hljs-number">3</span>))

<span class="hljs-comment"># Couche de convolution appliquant 16 filtres sous une matrice de 3x3</span>
<span class="hljs-comment"># Cette matrice balaye l'image</span>
<span class="hljs-comment"># La fonction d'activation est relu</span>
x = layers.Conv2D(<span class="hljs-number">16</span>, <span class="hljs-number">3</span>, activation=<span class="hljs-string">'relu'</span>)(img_input)
<span class="hljs-comment"># Couche pour raliser un MaxPooling : opration permettant de rduire</span>
<span class="hljs-comment"># la taille de la matrice de l'image tout en rcuprant un maximum d'infos</span>
<span class="hljs-comment"># ici on redimensionne la matrice en une 2x2</span>
x = layers.MaxPooling2D(<span class="hljs-number">2</span>)(x)

<span class="hljs-comment"># Couche de convolution appliquant 16 filtres sous une matrice de 3x3</span>
x = layers.Conv2D(<span class="hljs-number">32</span>, <span class="hljs-number">3</span>, activation=<span class="hljs-string">'relu'</span>)(x)
x = layers.MaxPooling2D(<span class="hljs-number">2</span>)(x)

<span class="hljs-comment"># Couche de convolution appliquant 64 filtres sous une matrice de 3x3</span>
x = layers.Conv2D(<span class="hljs-number">64</span>, <span class="hljs-number">3</span>, activation=<span class="hljs-string">'relu'</span>)(x)
x = layers.MaxPooling2D(<span class="hljs-number">2</span>)(x)
<span class="hljs-comment"># Aplatissement de x pour prparer la sortie</span>
x = layers.Flatten()(x)
<span class="hljs-comment"># Couche Dense pour le output = pleinement connect aux neurones la couche prcdente</span>
x = layers.Dense(<span class="hljs-number">512</span>, activation=<span class="hljs-string">'relu'</span>)(x)

outputs = layers.Dense(<span class="hljs-number">1</span>, activation=<span class="hljs-string">'sigmoid'</span>)(x)
</code></pre>
<p class="has-line-data" data-line-start="369" data-line-end="370">Instanciation du modle :</p>
<pre><code class="has-line-data" data-line-start="372" data-line-end="375" class="language-py">model = layers.models.Model(inputs=inputs, outputs=outputs)
models.summary() <span class="hljs-comment"># rsum du modle</span>
</code></pre>
<p class="has-line-data" data-line-start="376" data-line-end="377">Compilation du modle :</p>
<pre><code class="has-line-data" data-line-start="379" data-line-end="382" class="language-py"><span class="hljs-comment"># metrics = accuracy</span>
model.compile(loss=<span class="hljs-string">'binary_crossentropy'</span>, metrics=[<span class="hljs-string">'acc'</span>], optimizer=<span class="hljs-string">'rmsprop'</span>)
</code></pre>
<p class="has-line-data" data-line-start="383" data-line-end="384">Entranement :</p>
<pre><code class="has-line-data" data-line-start="386" data-line-end="396" class="language-py">history = model.fit_generator(train_gen,
                    <span class="hljs-comment"># combien d'images doivent tre traites  la fois ?</span>
                    <span class="hljs-comment"># opration : batch_size * steps = nombre d'images</span>
                    steps_per_epoch=<span class="hljs-number">100</span>, 
                    validation_data=val_gen, <span class="hljs-comment"># prciser l'chantillon de test</span>
                    <span class="hljs-comment"># le nombre d'tapes pour la validation</span>
                    <span class="hljs-comment"># opration : batch_size * steps = nombre d'images</span>
                    validation_steps=<span class="hljs-number">50</span>,
                    verbose=<span class="hljs-number">2</span>)
</code></pre>
<p class="has-line-data" data-line-start="397" data-line-end="398">Le code suivant permet de visualiser les diffrentes transformations des images aprs application de chaque couche (maxpooling2d, conv2d):</p>
<pre><code class="has-line-data" data-line-start="400" data-line-end="455" class="language-py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> random
<span class="hljs-keyword">from</span> tensorflow.keras.preprocessing.image <span class="hljs-keyword">import</span> img_to_array, load_img

<span class="hljs-comment"># Let's define a new Model that will take an image as input, and will output</span>
<span class="hljs-comment"># intermediate representations for all layers in the previous model after</span>
<span class="hljs-comment"># the first.</span>
successive_outputs = [layer.output <span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> model.layers[<span class="hljs-number">1</span>:]]
visualization_model = Model(img_input, successive_outputs)

<span class="hljs-comment"># Let's prepare a random input image of a cat or dog from the training set.</span>
cat_img_files = [os.path.join(train_cats_dir, f) <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> train_cat_fnames]
dog_img_files = [os.path.join(train_dogs_dir, f) <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> train_dog_fnames]
img_path = random.choice(cat_img_files + dog_img_files)

img = load_img(img_path, target_size=(<span class="hljs-number">150</span>, <span class="hljs-number">150</span>))  <span class="hljs-comment"># this is a PIL image</span>
x = img_to_array(img)  <span class="hljs-comment"># Numpy array with shape (150, 150, 3)</span>
x = x.reshape((<span class="hljs-number">1</span>,) + x.shape)  <span class="hljs-comment"># Numpy array with shape (1, 150, 150, 3)</span>

<span class="hljs-comment"># Rescale by 1/255</span>
x /= <span class="hljs-number">255</span>

<span class="hljs-comment"># Let's run our image through our network, thus obtaining all</span>
<span class="hljs-comment"># intermediate representations for this image.</span>
successive_feature_maps = visualization_model.predict(x)

<span class="hljs-comment"># These are the names of the layers, so can have them as part of our plot</span>
layer_names = [layer.name <span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> model.layers]

<span class="hljs-comment"># Now let's display our representations</span>
<span class="hljs-keyword">for</span> layer_name, feature_map <span class="hljs-keyword">in</span> zip(layer_names, successive_feature_maps):
  <span class="hljs-keyword">if</span> len(feature_map.shape) == <span class="hljs-number">4</span>:
    <span class="hljs-comment"># Just do this for the conv / maxpool layers, not the fully-connected layers</span>
    n_features = feature_map.shape[-<span class="hljs-number">1</span>]  <span class="hljs-comment"># number of features in feature map</span>
    <span class="hljs-comment"># The feature map has shape (1, size, size, n_features)</span>
    size = feature_map.shape[<span class="hljs-number">1</span>]
    <span class="hljs-comment"># We will tile our images in this matrix</span>
    display_grid = np.zeros((size, size * n_features))
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n_features):
      <span class="hljs-comment"># Postprocess the feature to make it visually palatable</span>
      x = feature_map[<span class="hljs-number">0</span>, :, :, i]
      x -= x.mean()
      x /= x.std()
      x *= <span class="hljs-number">64</span>
      x += <span class="hljs-number">128</span>
      x = np.clip(x, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>).astype(<span class="hljs-string">'uint8'</span>)
      <span class="hljs-comment"># We'll tile each filter into this big horizontal grid</span>
      display_grid[:, i * size : (i + <span class="hljs-number">1</span>) * size] = x
    <span class="hljs-comment"># Display the grid</span>
    scale = <span class="hljs-number">20.</span> / n_features
    plt.figure(figsize=(scale * n_features, scale))
    plt.title(layer_name)
    plt.grid(<span class="hljs-keyword">False</span>)
    plt.imshow(display_grid, aspect=<span class="hljs-string">'auto'</span>, cmap=<span class="hljs-string">'viridis'</span>)
</code></pre>
<h3 class="code-line" data-line-start=456 data-line-end=457><a id="Diagnostic_du_modle__laide_de_courbes_456"></a>Diagnostic du modle  laide de courbes</h3>
<p class="has-line-data" data-line-start="458" data-line-end="459">Pour obtenir les performances du modle, il est souvent ncessaire de passer par une reprsentation en courbes de lvolution en prcision, ainsi que de lvolution de la perte dinformation / erreur/</p>
<pre><code class="has-line-data" data-line-start="461" data-line-end="486" class="language-py"><span class="hljs-comment"># Retrieve a list of accuracy results on training and validation data</span>
<span class="hljs-comment"># sets for each training epoch</span>
acc = history.history[<span class="hljs-string">'acc'</span>]
val_acc = history.history[<span class="hljs-string">'val_acc'</span>]

<span class="hljs-comment"># Retrieve a list of list results on training and validation data</span>
<span class="hljs-comment"># sets for each training epoch</span>
loss = history.history[<span class="hljs-string">'loss'</span>]
val_loss = history.history[<span class="hljs-string">'val_loss'</span>]

<span class="hljs-comment"># Get number of epochs</span>
epochs = range(len(acc))

<span class="hljs-comment"># Plot training and validation accuracy per epoch</span>
plt.plot(epochs, acc)
plt.plot(epochs, val_acc)
plt.title(<span class="hljs-string">'Training and validation accuracy'</span>)

plt.figure()

<span class="hljs-comment"># Plot training and validation loss per epoch</span>
plt.plot(epochs, loss)
plt.plot(epochs, val_loss)
plt.title(<span class="hljs-string">'Training and validation loss'</span>)
</code></pre>
<p class="has-line-data" data-line-start="487" data-line-end="489">Pour que le modle soit valide, il faut que pour que chaque graphique, on ait une <strong>convergence</strong> de courbes, et pas une divergence.<br>
Sil y a divergence, on a affaire  un <strong>problme de surapprentissage</strong>.</p>
<p class="has-line-data" data-line-start="490" data-line-end="491"><a href="https://colab.research.google.com/github/google/eng-edu/blob/master/ml/pc/exercises/image_classification_part2.ipynb">Notebook</a></p>
<p class="has-line-data" data-line-start="492" data-line-end="494"><strong>Surapprentissage</strong> (<em>overfitting</em>) : ce problme se produit lorsquun modle ne possde pas suffisamment de donnes pour pouvoir mmoriser les diffrentes caractristiques qui distinguent une classe dune autre.<br>
Ce dfaut amne de mauvais rsultats au moment de lvaluation.</p>
<p class="has-line-data" data-line-start="495" data-line-end="496">Deux mthodes pour prvenir ce souci :</p>
<ul>
<li class="has-line-data" data-line-start="497" data-line-end="501">
<p class="has-line-data" data-line-start="497" data-line-end="500"><strong>Injecter beaucoup plus de donnes</strong>, mais comment faire sil nous nest pas possible den fournir davantage ? Il faut passer par une <strong>augmentation des donnes</strong> (<em>Data augmentation</em>) existantes.<br>
Les nouvelles donnes seront en ralit des copies des donnes existantes, <strong>mais avec des transformations alatoires</strong> (rotation, zoom).<br>
Comme il y a des diffrences dans les copies, le modle considrera quil sagit de donnes nouvelles.</p>
</li>
<li class="has-line-data" data-line-start="501" data-line-end="503">
<p class="has-line-data" data-line-start="501" data-line-end="502"><strong>Rgularisation par abandon</strong> (<em>dropout</em>) : on choisit arbitrairement les neurones qui ne devront pas traiter la donne --&gt; allger le rseau de neurones. Moins on excute de neurones, plus les donnes fournies seront suffisantes.</p>
</li>
</ul>
<p class="has-line-data" data-line-start="503" data-line-end="504"><strong>Application de <em>Data augmentation</em> :</strong></p>
<pre><code class="has-line-data" data-line-start="507" data-line-end="537" class="language-py"><span class="hljs-comment"># Data augmentation sur les donnes d'apprentissage</span>

train_datagen = ImageDataGenerator(
    rescale=<span class="hljs-number">1.</span>/<span class="hljs-number">255</span>, <span class="hljs-comment"># mise  chelle</span>
    rotation_range=<span class="hljs-number">40</span>, <span class="hljs-comment"># intervalle de rotation alatoire en degrs</span>
    width_shift_range=<span class="hljs-number">0.2</span>, <span class="hljs-comment"># redimensionnement de l'image (20 % de la largeur totale ici)</span>
    height_shift_range=<span class="hljs-number">0.2</span>, <span class="hljs-comment"># redimensionnement de l'image (20 % de la hauteur totale ici)</span>
    shear_range=<span class="hljs-number">0.2</span>, <span class="hljs-comment"># transvection alatoire de 20 % de l'image ("skew", exemple : rectangle + skew = paralllogramme)</span>
    zoom_range=<span class="hljs-number">0.2</span>, <span class="hljs-comment"># zoom alatoire de l'image  20%</span>
    horizontal_flip=<span class="hljs-keyword">True</span>, <span class="hljs-comment"># mettre l'image  l'horizontale ?</span>
    fill_mode=<span class="hljs-string">'nearest'</span> <span class="hljs-comment"># mode de reproduction des pixels l'image ('nearest' : reproduction fidle de l'originale</span>
    )

<span class="hljs-comment"># On n'applique pas la data augmentation sur nos donnes de test !</span>
<span class="hljs-comment"># Aprs tout le modle ne s'entrane pas avec, mais s'value</span>
val_datagen = ImageDataGenerator(rescale=<span class="hljs-number">1.</span>/<span class="hljs-number">255</span>)

train_generator = train_datagen.flow_from_directory(
        train_dir, 
        target_size=(<span class="hljs-number">150</span>, <span class="hljs-number">150</span>), 
        batch_size=<span class="hljs-number">20</span>,
        class_mode=<span class="hljs-string">'binary'</span>)


validation_generator = val_datagen.flow_from_directory(
        validation_dir,
        target_size=(<span class="hljs-number">150</span>, <span class="hljs-number">150</span>),
        batch_size=<span class="hljs-number">20</span>,
        class_mode=<span class="hljs-string">'binary'</span>)
</code></pre>
<p class="has-line-data" data-line-start="538" data-line-end="539">On peut ensuite refaire lapprentissage du modle  partir de ce nouveau jeu de donnes :</p>
<pre><code class="has-line-data" data-line-start="541" data-line-end="552" class="language-py">history = model.fit_generator(train_generator,
                    <span class="hljs-comment"># combien d'images doivent tre traites  la fois ?</span>
                    <span class="hljs-comment"># opration : batch_size * steps = nombre d'images</span>
                    steps_per_epoch=<span class="hljs-number">100</span>, 
                    validation_data=validation_generator, <span class="hljs-comment"># prciser l'chantillon de test</span>
                    <span class="hljs-comment"># le nombre d'tapes pour la validation</span>
                    <span class="hljs-comment"># opration : batch_size * steps = nombre d'images</span>
                    validation_steps=<span class="hljs-number">50</span>,
                    verbose=<span class="hljs-number">2</span>)

</code></pre>
<p class="has-line-data" data-line-start="553" data-line-end="554">Il faudra ensuite observer si la performance du modle est concluant ou pas (toujours avec les plots).</p>
<p class="has-line-data" data-line-start="555" data-line-end="556">**Application de dropout : **</p>
<p class="has-line-data" data-line-start="557" data-line-end="558">Cela sapplique juste avant la cration de <strong>la couche de loutput</strong> du CNN :</p>
<pre><code class="has-line-data" data-line-start="560" data-line-end="565" class="language-py"><span class="hljs-comment"># 0.5 : probabilit qu'un neurone  l'entre soit ignor</span>
<span class="hljs-comment"># le neurone est choisi alatoirement,  chaque tape de l'apprentissage (steps_per_epoch)</span>
<span class="hljs-comment"># cette valeur est totalement arbitraire, et il faut dterminer le bon taux de dropout</span>
x = layers.output(<span class="hljs-number">0.5</span>)(x)
</code></pre>
<h3 class="code-line" data-line-start=566 data-line-end=567><a id="valuer_le_modle_566"></a>valuer le modle</h3>
<p class="has-line-data" data-line-start="568" data-line-end="569">Permet dobtenir un score du modle</p>
<pre><code class="has-line-data" data-line-start="571" data-line-end="576" class="language-py"><span class="hljs-comment"># evaluate_generator est obsolte : prfrer evaluate</span>
<span class="hljs-comment"># renvoie un tableau de deux lments : loss, accuracy</span>
model.evaluate_generator(validation_generator)

</code></pre>
<h3 class="code-line" data-line-start=577 data-line-end=578><a id="Prdictions_du_modle_577"></a>Prdictions du modle</h3>
<p class="has-line-data" data-line-start="579" data-line-end="580">On peut vrifier si les rsultats que notre modle nous a renvoy pour nos donnes de tests, sont corrects ou non.</p>
<pre><code class="has-line-data" data-line-start="582" data-line-end="593" class="language-py"><span class="hljs-comment"># renvoie plusieurs tableaux de numpy  dimension 1</span>
<span class="hljs-comment"># chaque lment reprsente une probabilit (si suprieur  0.5, appartient  la classe / label 1, sinon 0)</span>
y_pred = model.predict_generator(validation_generator)

<span class="hljs-comment">#on peut amliorer l'affichage en le convertissant y_pred en Series</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-comment"># flatten : fusionner les diffrents tableaux en un seul</span>
pd.Series(y_pred.flatten()).head()

</code></pre>
<p class="has-line-data" data-line-start="594" data-line-end="596">On peut rcuprer les diffrents labels toujours grce  une instance de <code>tensorflow.python.keras.preprocessing.image.DirectoryIterator</code><br>
:</p>
<pre><code class="has-line-data" data-line-start="598" data-line-end="601" class="language-py">imgs, labels = next(validation_generator)
labels
</code></pre>
<p class="has-line-data" data-line-start="602" data-line-end="603">Et on peut comparer le contenu de chaque label, avec le contenu de chaque image (pouvoir distinguer si la classe 1 reprsente celle des chiens ou des chats).</p>
<h2 class="code-line" data-line-start=604 data-line-end=605><a id="Matrice_de_confusion_604"></a>Matrice de confusion</h2>
<p class="has-line-data" data-line-start="606" data-line-end="609">Utile pour avoir une rpartition des diffrentes classes de notre prdiction.<br>
En second paramtre de <code>confusion_matrix</code>, il faut passer un tableau dentiers binaire (0 ou 1).<br>
Cependant, nos donnes de prdiction sont en dcimales.</p>
<p class="has-line-data" data-line-start="610" data-line-end="611">Il faut convertir le tout en des valeurs entires :</p>
<pre><code class="has-line-data" data-line-start="613" data-line-end="620" class="language-py">
y_pred = (y_pred &gt; <span class="hljs-number">0.5</span>).astype(<span class="hljs-string">'int32'</span>)
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> confusion_matrix

<span class="hljs-comment"># validation_generator.classes : tableau reprsentant chaque image par sa classe</span>
conf_mat = confusion_matrix(validation_generator.classes, y_pred)
</code></pre>
<p class="has-line-data" data-line-start="621" data-line-end="622">On peut styliser la matrice  laide de <code>mlxtend</code> (linstaller si pas dj fait) :</p>
<pre><code class="has-line-data" data-line-start="624" data-line-end="628" class="language-py"><span class="hljs-keyword">from</span> mlxtend.plotting <span class="hljs-keyword">import</span> plot_confusion_matrix

plot_confusion_matrix(conf_mat=conf_mat, colorbar=<span class="hljs-keyword">True</span>, show_absolute=<span class="hljs-keyword">True</span>, show_normed=<span class="hljs-keyword">True</span>, class_names=[<span class="hljs-string">'dog'</span>,<span class="hljs-string">'cats'</span>])
</code></pre>
<h2 class="code-line" data-line-start=628 data-line-end=629><a id="Transfer_Learning__rutiliser_un_modle_en_production_628"></a>Transfer Learning : rutiliser un modle en production</h2>
<p class="has-line-data" data-line-start="630" data-line-end="631">Le principe est de pouvoir <strong>rutiliser un modle</strong> rseau de neurones, qui est <strong>dj entran</strong> sans forcment en btir un.</p>
<p class="has-line-data" data-line-start="632" data-line-end="633">Des exemples de rseaux de neurones fameux pour leur rutilisation :</p>
<ul>
<li class="has-line-data" data-line-start="634" data-line-end="635">AlexNet</li>
<li class="has-line-data" data-line-start="635" data-line-end="637">VGG16</li>
</ul>
<p class="has-line-data" data-line-start="637" data-line-end="638">Chacun a ses avantages et ses inconvnients.</p>
<p class="has-line-data" data-line-start="639" data-line-end="641">VGG16 utilise un algorithme de rseau de neurones dont <strong>la profondeur / le nombre de couches</strong> est trs leve, et de grosses quantits de donnes lui ont t pass.<br>
Son apprentissage a dur <strong>2 semaines, mais avec de trs bons rsultats en retour !</strong></p>
<p class="has-line-data" data-line-start="642" data-line-end="643">Tensorflow possde dans ses librairies, une <strong>implmentation du VGG16</strong> :</p>
<pre><code class="has-line-data" data-line-start="645" data-line-end="657" class="language-py"><span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf

tf.keras.applications.vgg16

<span class="hljs-comment"># dcode la prdiction d'un jeu de donnes provenant de ImageNet (base de donnes d'images publique)</span>
<span class="hljs-comment"># accepte en premier argument une matrice</span>
<span class="hljs-comment"># cration d'un tableau de 1000 valeurs : np.arange(1000)</span>
<span class="hljs-comment"># cration d'une matrice  une dimension, et avec une ligne de longueur 1000</span>
tf.keras.applications.vgg16.decode_predictions(np.arange(<span class="hljs-number">1000</span>).reshape(<span class="hljs-number">1</span>, <span class="hljs-number">1000</span>), top=<span class="hljs-number">1000</span>)

<span class="hljs-comment"># attribue  chaque groupe d'image existant sur ImageNet, un entier (entre 1 et 1000)</span>
</code></pre>
<h3 class="code-line" data-line-start=658 data-line-end=659><a id="Instancier_le_modle_VGG16__instanciation_658"></a>Instancier le modle VGG16 + instanciation</h3>
<pre><code class="has-line-data" data-line-start="661" data-line-end="667" class="language-py"><span class="hljs-keyword">from</span> tensorflow.keras.applications.vgg16 <span class="hljs-keyword">import</span> VGG16
model = VGG16()

<span class="hljs-comment"># l'importation du VGG16 tlcharge les poids du modle (528 MB) </span>
<span class="hljs-comment"># dans le rpertoire .keras/models</span>
</code></pre>
<p class="has-line-data" data-line-start="668" data-line-end="669">On peut avoir une reprsentation du VGG16 via la fonction <code>summary()</code> :</p>
<pre><code class="has-line-data" data-line-start="671" data-line-end="673" class="language-py">model.summary()
</code></pre>
<p class="has-line-data" data-line-start="674" data-line-end="675"><a href="https://neurohive.io/wp-content/uploads/2018/11/vgg16.png">Voici une reprsentation schmatise par couche</a></p>
<p class="has-line-data" data-line-start="676" data-line-end="677">Lexcution de la fonction nous affichera environ <strong>140 millions de paramtres</strong> (soit 140 millions de poids).</p>
<h3 class="code-line" data-line-start=678 data-line-end=679><a id="Prprocessing_pour_format_VGG_678"></a>Prprocessing pour format VGG</h3>
<p class="has-line-data" data-line-start="680" data-line-end="681">Afin dappliquer de la classification dimages  partir du VGG16, il faut convertir les images <strong>en format VGG</strong>.</p>
<pre><code class="has-line-data" data-line-start="684" data-line-end="700" class="language-py"><span class="hljs-keyword">from</span> IPython.display <span class="hljs-keyword">import</span> Image
<span class="hljs-keyword">from</span> tensorflow.keras.preprocessing.image <span class="hljs-keyword">import</span> load_img
<span class="hljs-keyword">from</span> tensorflow.keras.applications.vgg16  <span class="hljs-keyword">import</span> preprocess_import

<span class="hljs-comment"># Chargement et redimension (VGG16 tant entran sur des images 224 x 224)</span>
image = load_img(<span class="hljs-string">'chemin vers image'</span>, target_size(<span class="hljs-number">224</span>,<span class="hljs-number">224</span>))

<span class="hljs-comment"># Prparation en VGG : soustraction de la moyenne des pixels</span>
image = preprocess_input(image)
image.shape <span class="hljs-comment"># affichera (1, 224, 224, 3)</span>

<span class="hljs-comment"># pour afficher l'image prprocesse</span>

tf.keras.preprocessing.image_to_array(img)

</code></pre>
<h3 class="code-line" data-line-start=701 data-line-end=702><a id="Prdiction_701"></a>Prdiction</h3>
<p class="has-line-data" data-line-start="703" data-line-end="704">Maintenant que limage a un format compatible, on peut demander  VGG, de deviner la classe.</p>
<pre><code class="has-line-data" data-line-start="706" data-line-end="716" class="language-py">Renvoie un tableau de probabilits
proba = model.predict(image_pr)
proba

<span class="hljs-string">"""
   On peut convertir le tableau de probabilits
   en un dataframe pour que cela soit plus visible
"""</span>
pd.Dataframe(proba).T.sort_values(<span class="hljs-number">0</span>, ascending=<span class="hljs-keyword">False</span>)
</code></pre>
<h3 class="code-line" data-line-start=717 data-line-end=718><a id="Reconnaissance_de_limage_717"></a>Reconnaissance de limage</h3>
<p class="has-line-data" data-line-start="719" data-line-end="720">On peut commencer  dterminer la classe de limage grce  la probabilit.</p>
<pre><code class="has-line-data" data-line-start="722" data-line-end="726" class="language-py"><span class="hljs-keyword">from</span> tensorflow.keras.applications.vgg16 <span class="hljs-keyword">import</span> decode_predictions
label = decode_predictions(proba)
label <span class="hljs-comment"># renverra un tableau contenant des labels se rapprochant de la probabilit</span>
</code></pre>
<h2 class="code-line" data-line-start=727 data-line-end=728><a id="Adapter_un_modle_de_production__notre_besoin_727"></a>Adapter un modle de production  notre besoin</h2>
<p class="has-line-data" data-line-start="729" data-line-end="730">Le VGG16 contient un gros nombre de paramtres (140 millions), car il est prt  travailler sur <strong>1000 classes (des millions dimages)</strong>.</p>
<p class="has-line-data" data-line-start="731" data-line-end="732">Pour viter de gaspiller des ressources inutiles, il faut justement <strong>adapter la structure de ce modle  notre besoin</strong> -&gt; rcuprer uniquement les labels concernant les chats et chiens ici.</p>
<pre><code class="has-line-data" data-line-start="734" data-line-end="741" class="language-py">target = decode_predictions(np.arrage(<span class="hljs-number">1000</span>).reshape(<span class="hljs-number">1</span>,<span class="hljs-number">1000</span>), top=<span class="hljs-number">1000</span>) <span class="hljs-comment"># rcupration de tous les labels</span>
dog = target.label.str.contains(<span class="hljs-string">'_dog'</span>)

target[dog] <span class="hljs-comment"># labels contenant "dog"</span>

cat = target.label.str.contains(<span class="hljs-string">'_cat'</span>)
</code></pre>
<p class="has-line-data" data-line-start="742" data-line-end="743">Cependant cette faon de filtrer les labels nest pas la meilleure, car il contient un nombre restreint de races de chiens et de chats.</p>
<p class="has-line-data" data-line-start="744" data-line-end="745"><strong>Il faut aller plus loin dans ladaptation du modle.</strong></p>
<p class="has-line-data" data-line-start="746" data-line-end="747">Lide est de rcuprer les couches du modle, dans un nouveau modle :</p>
<pre><code class="has-line-data" data-line-start="749" data-line-end="763" class="language-py">
cnn = Sequential()
<span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> model.layers[:-<span class="hljs-number">1</span>]:
    cnn.add(layer)
    
cnn.summary()

<span class="hljs-string">"""
   On ne rcupre pas la dernire couche (output)
   Car l'output envoie des rsultats pour 1000 classes
   Nous, comme nous voulons savoir s'il s'agit d'un chien ou d'un chat,
   deux classes nous suffit.
"""</span>
</code></pre>
<p class="has-line-data" data-line-start="764" data-line-end="765">Comme notre modle se base sur un modle dj entran, il est inutile que notre modle se soumettre  un entranement.</p>
<p class="has-line-data" data-line-start="766" data-line-end="768">Il faut donc prciser pour chaque couche, quon ne souhaite pas effectuer un entranement.<br>
Il sagit de mettre lattribut <code>trainable</code>  <code>False</code>.</p>
<pre><code class="has-line-data" data-line-start="770" data-line-end="775" class="language-py">
<span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> cnn.layers:
    layer.trainable = <span class="hljs-keyword">False</span>
    
</code></pre>
<p class="has-line-data" data-line-start="776" data-line-end="777">On peut maintenant rajouter la dernire couche, avec le bon nombre de classes  dterminer :</p>
<pre><code class="has-line-data" data-line-start="779" data-line-end="781" class="language-py">cnn.add(Dense(units=<span class="hljs-number">2</span>, activation=<span class="hljs-string">'softmax'</span>))
</code></pre>
<p class="has-line-data" data-line-start="782" data-line-end="783"><a href="developers.google.com/machine_learning/practica/image_classification/exercice_3">Notebook pour dconstruire un autre modle afin de lappliquer sur un cas plus restreint</a></p>
<p class="has-line-data" data-line-start="784" data-line-end="785"><a href="https://onedrive.live.com/?authkey=%21AEpov3AcXs2dSqY&amp;id=6C6D756296D4662%21783226&amp;cid=06C6D756296D4662">Ressources du prof (notebooks pour VGG, data)</a></p>
</body></html>